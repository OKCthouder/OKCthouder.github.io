<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ISLAND</title>
  <subtitle>一个人的孤岛。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://okcthouder.github.io/"/>
  <updated>2017-07-31T10:22:27.709Z</updated>
  <id>https://okcthouder.github.io/</id>
  
  <author>
    <name>Yujie Yang</name>
    <email>615851120@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>如何解决node.js中fs.rename文件跨域问题</title>
    <link href="https://okcthouder.github.io/2017/07/31/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3node-js%E4%B8%ADfs-rename%E6%96%87%E4%BB%B6%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/"/>
    <id>https://okcthouder.github.io/2017/07/31/如何解决node-js中fs-rename文件跨域问题/</id>
    <published>2017-07-31T10:01:08.000Z</published>
    <updated>2017-07-31T10:22:27.709Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最近在学习node.js，今天在写一个文件上传的功能，调用fs.rename上传文件时程序报了错。 </p>
 <a id="more"></a>
<p>具体如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Error</span>: EXDEV: cross-device link not permitted, rename <span class="string">'C:\Users\Simple_Y\AppData\Local\Temp\12920-ww17q9.vtx0mb1emi.jpg'</span> -&gt;</div><div class="line">  <span class="string">'E:\杨宇杰_备份2\光盘资源\Node.js实战\code\8\photo_app\public\photos\281295.jpg'</span></div><div class="line">    at <span class="built_in">Error</span> (native)</div></pre></td></tr></table></figure>
<p>大致意思应该是说不能跨盘符上传文件，涉及到权限问题。</p>
<hr>
<h1 id="问题代码"><a href="#问题代码" class="headerlink" title="问题代码"></a>问题代码</h1><p>下面贴出我的代码(部分)：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">exports.submit = <span class="function"><span class="keyword">function</span> (<span class="params">dir</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> img = req.files.photo.image;</div><div class="line">    <span class="keyword">var</span> name = req.body.photo.name || img.name;</div><div class="line">    <span class="keyword">var</span> path = join(dir, img.name);</div><div class="line"></div><div class="line">    <span class="comment">//fs.rename(img.path, path, function(err)&#123;</span></div><div class="line">      <span class="comment">//if (err) return next(err);</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>经过百度，终于找到了解决办法：</p>
<p>将上面的注释掉的两行代码换成下面的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">fs.readFile(img.path, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'File read!'</span>);</div><div class="line"></div><div class="line">            <span class="comment">// Write the file</span></div><div class="line">            fs.writeFile(path, data, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</div><div class="line">                res.write(<span class="string">'File uploaded and moved!'</span>);</div><div class="line">                res.end();</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'File written!'</span>);</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            <span class="comment">// Delete the file</span></div><div class="line">            fs.unlink(img.path, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'File deleted!'</span>);</div><div class="line">            &#125;);</div></pre></td></tr></table></figure>
<h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>至此，运行程序，问题完美解决。</p>
<p>感谢万能的百度！</p>
<p>参考链接：<a href="https://stackoverflow.com/questions/37153666/error-exdev-cross-device-link-not-permitted-rename-tmp-on-ubuntu-16-04-lts" target="_blank" rel="external">https://stackoverflow.com/questions/37153666/error-exdev-cross-device-link-not-permitted-rename-tmp-on-ubuntu-16-04-lts</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;最近在学习node.js，今天在写一个文件上传的功能，调用fs.rename上传文件时程序报了错。 &lt;/p&gt;
    
    </summary>
    
      <category term="node.js" scheme="https://okcthouder.github.io/categories/node-js/"/>
    
    
      <category term="node.js" scheme="https://okcthouder.github.io/tags/node-js/"/>
    
      <category term="fs.rename" scheme="https://okcthouder.github.io/tags/fs-rename/"/>
    
      <category term="文件跨域" scheme="https://okcthouder.github.io/tags/%E6%96%87%E4%BB%B6%E8%B7%A8%E5%9F%9F/"/>
    
  </entry>
  
  <entry>
    <title>如何理解javascript中的闭包</title>
    <link href="https://okcthouder.github.io/2017/07/24/%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3javascript%E4%B8%AD%E7%9A%84%E9%97%AD%E5%8C%85/"/>
    <id>https://okcthouder.github.io/2017/07/24/如何理解javascript中的闭包/</id>
    <published>2017-07-24T08:09:29.000Z</published>
    <updated>2017-07-28T03:01:26.614Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>闭包（closure）是Javascript语言的一个难点，也是它的特色，很多高级应用都要依靠闭包实现。</p>
</blockquote>
 <a id="more"></a>
<h3 id="一、变量的作用域"><a href="#一、变量的作用域" class="headerlink" title="一、变量的作用域"></a>一、变量的作用域</h3><p>要理解闭包，首先必须理解Javascript特殊的变量作用域。</p>
<p>变量的作用域无非就是两种：全局变量和局部变量。</p>
<p>Javascript语言的特殊之处，就在于函数内部可以直接读取全局变量。</p>
<p>Js代码　</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> n=<span class="number">999</span>;</div><div class="line"></div><div class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　alert(n);</div><div class="line">　　&#125;</div><div class="line">　　f1(); <span class="comment">// 999</span></div></pre></td></tr></table></figure>
<p>另一方面，在函数外部自然无法读取函数内的局部变量。</p>
<p>Js代码　</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　<span class="keyword">var</span> n=<span class="number">999</span>;</div><div class="line">　　&#125;</div><div class="line"></div><div class="line">　　alert(n); <span class="comment">// error</span></div></pre></td></tr></table></figure>
<p>这里有一个地方需要注意，函数内部声明变量的时候，一定要使用<strong>var命令</strong>。如果不用的话，你实际上声明了一个全局变量！</p>
<p>Js代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　n=<span class="number">999</span>;</div><div class="line">　　&#125;</div><div class="line"></div><div class="line">　　f1();</div><div class="line"></div><div class="line">　　alert(n); <span class="comment">// 999</span></div></pre></td></tr></table></figure>
<hr>
<h3 id="二、如何从外部读取局部变量？"><a href="#二、如何从外部读取局部变量？" class="headerlink" title="二、如何从外部读取局部变量？"></a>二、如何从外部读取局部变量？</h3><p>出于种种原因，我们有时候需要得到函数内的局部变量。但是，前面已经说过了，正常情况下，这是办不到的，只有通过变通方法才能实现。</p>
<p>那就是在函数的内部，再定义一个函数。</p>
<p>Js代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　n=<span class="number">999</span>;</div><div class="line">　　　　<span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　　　alert(n); <span class="comment">// 999</span></div><div class="line">　　　　&#125;</div><div class="line">　　&#125;</div></pre></td></tr></table></figure>
<p>在上面的代码中，函数f2就被包括在函数f1内部，这时f1内部的所有局部变量，对f2都是可见的。但是反过来就不行，f2内部的局部变量，对f1 就是不可见的。这就是Javascript语言特有的“链式作用域”结构（chain scope），</p>
<p>子对象会一级一级地向上寻找所有父对象的变量。所以，父对象的所有变量，对子对象都是可见的，反之则不成立。</p>
<p>既然f2可以读取f1中的局部变量，那么只要把f2作为返回值，我们不就可以在f1外部读取它的内部变量了吗！</p>
<p>Js代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　n=<span class="number">999</span>;</div><div class="line">　　　　<span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　　　alert(n);</div><div class="line">　　　　&#125;</div><div class="line">　　　　<span class="keyword">return</span> f2;</div><div class="line">　　&#125;</div><div class="line">　　<span class="keyword">var</span> result=f1();</div><div class="line"></div><div class="line">　　result(); <span class="comment">// 999</span></div></pre></td></tr></table></figure>
<hr>
<h3 id="三、闭包的概念"><a href="#三、闭包的概念" class="headerlink" title="三、闭包的概念"></a>三、闭包的概念</h3><p>上一节代码中的f2函数，就是闭包。</p>
<p>各种专业文献上的“闭包”（closure）定义非常抽象，很难看懂。我的理解是，闭包就是能够读取其他函数内部变量的函数。</p>
<p>由于在Javascript语言中，只有函数内部的子函数才能读取局部变量，因此可以把闭包简单理解成“定义在一个函数内部的函数”。</p>
<p>所以，在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。</p>
<hr>
<h3 id="四、闭包的用途"><a href="#四、闭包的用途" class="headerlink" title="四、闭包的用途"></a>四、闭包的用途</h3><p>闭包可以用在许多地方。它的最大用处有两个，一个是前面提到的可以读取函数内部的变量，另一个就是让这些变量的值始终保持在内存中。</p>
<p>怎么来理解这句话呢？请看下面的代码。</p>
<p>Js代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　<span class="keyword">var</span> n=<span class="number">999</span>;</div><div class="line">    </div><div class="line">　　　　nAdd=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;n+=<span class="number">1</span>&#125;</div><div class="line">　　　　<span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　　　alert(n);</div><div class="line">　　　　&#125;</div><div class="line">　　　　<span class="keyword">return</span> f2;</div><div class="line">　　&#125;</div><div class="line">　　<span class="keyword">var</span> result=f1();</div><div class="line"></div><div class="line">　　result(); <span class="comment">// 999</span></div><div class="line"></div><div class="line">　　nAdd();</div><div class="line"></div><div class="line">　　result(); <span class="comment">// 1000</span></div></pre></td></tr></table></figure>
<p>在这段代码中，result实际上就是闭包f2函数。它一共运行了两次，第一次的值是999，第二次的值是1000。这证明了，函数f1中的局部变量n一直保存在内存中，并没有在f1调用后被自动清除。</p>
<p>为什么会这样呢？原因就在于f1是f2的父函数，而f2被赋给了一个全局变量，这导致f2始终在内存中，而f2的存在依赖于f1，因此f1也始终在内存中，不会在调用结束后，被垃圾回收机制（garbage collection）回收。</p>
<p>这段代码中另一个值得注意的地方，就是“nAdd=function(){n+=1}”这一行，首先在nAdd前面没有使用var关键字，因此 nAdd是一个全局变量，而不是局部变量。其次，nAdd的值是一个匿名函数（anonymous function），而这个</p>
<p>匿名函数本身也是一个闭包，所以nAdd相当于是一个setter，可以在函数外部对函数内部的局部变量进行操作。</p>
<hr>
<h3 id="五、使用闭包的注意点"><a href="#五、使用闭包的注意点" class="headerlink" title="五、使用闭包的注意点"></a>五、使用闭包的注意点</h3><p>1）由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。</p>
<p>2）闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象（object）使用，把闭包当作它的公用方法（Public Method），把内部变量当作它的私有属性（private value），这时一定要小心，不要随便</p>
<p>改变父函数内部变量的值。</p>
<hr>
<h3 id="六、思考题"><a href="#六、思考题" class="headerlink" title="六、思考题"></a>六、思考题</h3><p>如果你能理解下面代码的运行结果，应该就算理解闭包的运行机制了。</p>
<p>Js代码 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">　　<span class="keyword">var</span> name = <span class="string">"The Window"</span>;   </div><div class="line"></div><div class="line">　　<span class="keyword">var</span> object = &#123;   </div><div class="line">　　　　<span class="attr">name</span> : <span class="string">"My Object"</span>,   </div><div class="line">　　　　<span class="attr">getNameFunc</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   </div><div class="line">　　　　　　<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   </div><div class="line">　　　　　　　　<span class="keyword">return</span> <span class="keyword">this</span>.name;   </div><div class="line">　　　　　&#125;;   </div><div class="line">　　　　&#125;   </div><div class="line">&#125;;   </div><div class="line"></div><div class="line">alert(object.getNameFunc()());  <span class="comment">//The Window</span></div></pre></td></tr></table></figure>
<p><strong>常见的陷阱</strong></p>
<p>看看这个：</p>
<p>乍一看，以为输出 0~9 ，万万没想到输出10个10？</p>
<p>这里的陷阱就是：<strong>函数带()才是执行函数！</strong> 单纯的一句 var f = function() { alert(‘Hi’); }; 是不会弹窗的，后面接一句 f(); 才会执行函数内部的代码。上面代码翻译一下就是：</p>
<p>为什么只垃圾回收了 result，但却不收了 i 呢？ 因为 i 还在被 function 引用着啊。好比一个餐厅，盘子总是有限的，所以服务员会去巡台回收空盘子，但还装着菜的盘子他怎么敢收？ 当然，你自己手动倒掉了盘子里面的菜（=null），那盘子就会被收走了，这就是所谓的内存回收机制。</p>
<p>至于 i 的值怎么还能保留，其实从文章开头一路读下来，这应该没有什么可以纠结的地方。盘子里面的菜，吃了一块不就应该少一块吗？</p>
<hr>
<p><strong>JavaScript闭包例子</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">outerFun</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> a=<span class="number">0</span>;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">innerFun</span>(<span class="params"></span>)</span></div><div class="line">  &#123;</div><div class="line">   a++;</div><div class="line">   alert(a);</div><div class="line">  &#125;    </div><div class="line"> &#125;</div><div class="line">innerFun();</div></pre></td></tr></table></figure>
<p>上面的代码是错误的.innerFun()的作用域在outerFun()内部,所在outerFun()外部调用它是错误的.</p>
<p>改成如下,也就是闭包:</p>
<p>Js代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">outerFun</span>(<span class="params"></span>)</span>&#123;</div><div class="line"> <span class="keyword">var</span> a=<span class="number">0</span>;</div><div class="line"></div><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">innerFun</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  a++;</div><div class="line">  alert(a);</div><div class="line"> &#125;</div><div class="line"> <span class="keyword">return</span> innerFun;  <span class="comment">//注意这里</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj=outerFun();</div><div class="line"></div><div class="line">obj();  <span class="comment">//结果为1</span></div><div class="line"></div><div class="line">obj();  <span class="comment">//结果为2</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> obj2=outerFun();</div><div class="line"></div><div class="line">obj2();  <span class="comment">//结果为1</span></div><div class="line"></div><div class="line">obj2();  <span class="comment">//结果为2</span></div></pre></td></tr></table></figure>
<p>什么是闭包:</p>
<p>当内部函数 在定义它的作用域 的外部 被引用时,就创建了该内部函数的闭包 ,如果内部函数引用了位于外部函数的变量,当外部函数调用完毕后,这些变量在内存不会被 释放,因为闭包需要它们.</p>
<hr>
<p><strong>再来看一个例子</strong></p>
<p>Js代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">outerFun</span>(<span class="params"></span>)</span>&#123;</div><div class="line"> <span class="keyword">var</span> a =<span class="number">0</span>;</div><div class="line"> alert(a);  </div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> a=<span class="number">4</span>;</div><div class="line"></div><div class="line">outerFun();</div><div class="line"></div><div class="line">alert(a);</div></pre></td></tr></table></figure>
<p>结果是 0,4 .  因为在函数内部使用了var关键字 维护a的作用域在outFun()内部.</p>
<p>再看下面的代码:</p>
<p>Js代码 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">outerFun</span>(<span class="params"></span>)</span>&#123;</div><div class="line"> <span class="comment">//没有var </span></div><div class="line"> a =<span class="number">0</span>;</div><div class="line"> alert(a);  </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> a=<span class="number">4</span>;</div><div class="line"></div><div class="line">outerFun();</div><div class="line"></div><div class="line">alert(a);</div></pre></td></tr></table></figure>
<p>结果为 0,0 真是奇怪,为什么呢?</p>
<p>作用域链是描述一种路径的术语,沿着该路径可以确定变量的值 .当执行a=0时,因为没有使用var关键字,因此赋值操作会沿着作用域链到var a=4;  并改变其值.</p>
<p>-————————————————————————————————————————————————-</p>
<p>如果你对javascript闭包还不是很理解，那么请看下面转载的文章：(转载:<a href="http://www.felixwoo.com/archives/247" target="_blank" rel="external">http://www.felixwoo.com/archives/247</a>)</p>
<h3 id="七、什么是闭包？"><a href="#七、什么是闭包？" class="headerlink" title="七、什么是闭包？"></a>七、什么是闭包？</h3><p>官方”的解释是：闭包是一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。<br>相信很少有人能直接看懂这句话，因为他描述的太学术。其实这句话通俗的来说就是：<strong>JavaScript中所有的function都是一个闭包</strong>。不过一般来说，嵌套的function所产生的闭包更为强大，也是大部分时候我们所谓的“闭包”。看下面这段代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123; </div><div class="line"> <span class="keyword">var</span> i = <span class="number">0</span>; </div><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123; alert(++i); &#125; </div><div class="line"> <span class="keyword">return</span> b;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> c = a();</div><div class="line">c();</div></pre></td></tr></table></figure>
<p>这段代码有两个特点：</p>
<p>1、函数b嵌套在函数a内部；</p>
<p>2、函数a返回函数b。</p>
<p>引用关系如图：</p>
<p><img src="http://files.jb51.net/upload/201007/20100703001016918.jpg" alt="img"></p>
<p>　　这样在执行完var c=a()后，变量c实际上是指向了函数b，再执行c()后就会弹出一个窗口显示i的值(第一次为1)。这段代码其实就创建了一个闭包，为什么？因为函数a外的变量c引用了函数a内的函数b，就是说：</p>
<p>　　<strong>当函数a的内部函数b被函数a外的一个变量引用的时候，就创建了一个闭包。</strong></p>
<p>　　让我们说的更透彻一些。所谓“闭包”，就是在构造函数体内定义另外的函数作为目标对象的方法函数，而这个对象的方法函数反过来引用外层函数体中的临时变量。这使得只要目标 对象在生存期内始终能保持其方法，就能间接保持原构造函数体当时用到的临时变量值。尽管最开始的构造函数调用已经结束，临时变量的名称也都消失了，但在目 标对象的方法内却始终能引用到该变量的值，而且该值只能通这种方法来访问。即使再次调用相同的构造函数，但只会生成新对象和方法，新的临时变量只是对应新 的值，和上次那次调用的是各自独立的。</p>
<h3 id="八、闭包有什么作用？"><a href="#八、闭包有什么作用？" class="headerlink" title="八、闭包有什么作用？"></a>八、闭包有什么作用？</h3><p>　　简而言之，闭包的作用就是在a执行完并返回后，闭包使得Javascript的垃圾回收机制GC不会收回a所占用的资源，因为a的内部函数b的执行需要依赖a中的变量。这是对闭包作用的非常直白的描述，不专业也不严谨，但大概意思就是这样，理解闭包需要循序渐进的过程。</p>
<p>在上面的例子中，由于闭包的存在使得函数a返回后，a中的i始终存在，这样每次执行c()，i都是自加1后alert出i的值。</p>
<p>　　那 么我们来想象另一种情况，如果a返回的不是函数b，情况就完全不同了。因为a执行完后，b没有被返回给a的外界，只是被a所引用，而此时a也只会被b引 用，因此函数a和b互相引用但又不被外界打扰(被外界引用)，函数a和b就会被GC回收。(关于Javascript的垃圾回收机制将在后面详细介绍)</p>
<h3 id="九、闭包内的微观世界"><a href="#九、闭包内的微观世界" class="headerlink" title="九、闭包内的微观世界"></a>九、闭包内的微观世界</h3><p>　　如果要更加深入的了解闭包以及函数a和嵌套函数b的关系，我们需要引入另外几个概念：函数的执行环境(excution context)、活动对象(call object)、作用域(scope)、作用域链(scope chain)。以函数a从定义到执行的过程为例阐述这几个概念。</p>
<ol>
<li>当<strong>定义</strong>函数a的时候，js解释器会将函数a的<strong>作用域链(scope chain)</strong>设置为<strong>定义a时a所在的“环境”</strong>，如果a是一个全局函数，则scope chain中只有window对象。</li>
<li>当<strong>执行</strong>函数a的时候，a会进入相应的<strong>执行环境(excution context)</strong>。</li>
<li>在创建执行环境的过程中，首先会为a添加一个scope属性，即a的<strong>作用域</strong>，其值就为第1步中的scope chain。即a.scope=a的作用域链。</li>
<li>然后执行环境会创建一个<strong>活动对象(call object)</strong>。活动对象也是一个拥有属性的对象，但它不具有原型而且不能通过JavaScript代码直接访问。创建完活动对象后，把活动对象添加到a的作用域链的最顶端。此时a的作用域链包含了两个对象：a的活动对象和window对象。</li>
<li>下一步是在活动对象上添加一个arguments属性，它保存着调用函数a时所传递的参数。</li>
<li>最后把所有函数a的形参和内部的函数b的引用也添加到a的活动对象上。在这一步中，完成了函数b的的定义，因此如同第3步，函数b的作用域链被设置为b所被定义的环境，即a的作用域。</li>
</ol>
<p>到此，整个函数a从定义到执行的步骤就完成了。此时a返回函数b的引用给c，又函数b的作用域链包含了对函数a的活动对象的引用，也就是说b可以访问到a中定义的所有变量和函数。函数b被c引用，函数b又依赖函数a，因此函数a在返回后不会被GC回收。</p>
<p>当函数b执行的时候亦会像以上步骤一样。因此，执行时b的作用域链包含了3个对象：b的活动对象、a的活动对象和window对象，如下图所示：</p>
<p><img src="http://files.jb51.net/upload/201007/20100703001017585.jpg" alt="img"></p>
<p>如图所示，当在函数b中访问一个变量的时候，搜索顺序是：</p>
<ol>
<li>先搜索自身的活动对象，如果存在则返回，如果不存在将继续搜索函数a的活动对象，依次查找，直到找到为止。</li>
<li>如果函数b存在prototype原型对象，则在查找完自身的活动对象后先查找自身的原型对象，再继续查找。这就是Javascript中的变量查找机制。</li>
<li>如果整个作用域链上都无法找到，则返回undefined。</li>
</ol>
<p>小结，本段中提到了两个重要的词语：函数的<strong>定义</strong>与<strong>执行</strong>。文中提到函数的作用域是在定义函数时候就已经确定，而不是在执行的时候确定（参看步骤1和3）。用一段代码来说明这个问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">function f(x) &#123; </div><div class="line">  var g = function () &#123; return x; &#125;</div><div class="line">  return g;</div><div class="line">&#125;</div><div class="line">var h = f(1);</div><div class="line">alert(h());</div></pre></td></tr></table></figure>
<p>这段代码中变量h指向了f中的那个匿名函数(由g返回)。</p>
<ul>
<li>假设函数h的作用域是在执行alert(h())确定的，那么此时h的作用域链是：h的活动对象-&gt;alert的活动对象-&gt;window对象。</li>
<li>假设函数h的作用域是在定义时确定的，就是说h指向的那个匿名函数在定义的时候就已经确定了作用域。那么在执行的时候，h的作用域链为：h的活动对象-&gt;f的活动对象-&gt;window对象。</li>
</ul>
<p>如果第一种假设成立，那输出值就是undefined；如果第二种假设成立，输出值则为1。</p>
<p>运行结果证明了第2个假设是正确的，说明函数的作用域确实是在定义这个函数的时候就已经确定了。</p>
<h3 id="十、闭包的应用场景"><a href="#十、闭包的应用场景" class="headerlink" title="十、闭包的应用场景"></a>十、闭包的应用场景</h3><p>保护函数内的变量安全。以最开始的例子为例，函数a中i只有函数b才能访问，而无法通过其他途径访问到，因此保护了i的安全性。</p>
<ol>
<li><p>在内存中维持一个变量。依然如前例，由于闭包，函数a中i的一直存在于内存中，因此每次执行c()，都会给i自加1。</p>
</li>
<li><p>通过保护变量的安全实现JS私有属性和私有方法（不能被外部访问）</p>
<p>​</p>
<p>私有属性和方法在Constructor外是无法被访问的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Constructor</span>(<span class="params">...</span>) </span>&#123;  </div><div class="line">  </div><div class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>;  </div><div class="line"></div><div class="line">  <span class="keyword">var</span> membername = value; </div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">membername</span>(<span class="params">...</span>) </span>&#123;...&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>以上3点是闭包最基本的应用场景，很多经典案例都源于此。</p>
<h3 id="十一、Javascript的垃圾回收机制"><a href="#十一、Javascript的垃圾回收机制" class="headerlink" title="十一、Javascript的垃圾回收机制"></a>十一、Javascript的垃圾回收机制</h3><p>在Javascript中，如果一个对象不再被引用，那么这个对象就会被GC回收。如果两个对象互相引用，而不再被第3者所引用，那么这两个互相引用的对象也会被回收。因为函数a被b引用，b又被a外的c引用，这就是为什么函数a执行后不会被回收的原因。</p>
<h3 id="十二、结语"><a href="#十二、结语" class="headerlink" title="十二、结语"></a>十二、结语</h3><p>理解JavaScript的闭包是迈向高级JS程序员的必经之路，理解了其解释和运行机制才能写出更为安全和优雅的代码。</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;闭包（closure）是Javascript语言的一个难点，也是它的特色，很多高级应用都要依靠闭包实现。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="javascript" scheme="https://okcthouder.github.io/categories/javascript/"/>
    
    
      <category term="javascript" scheme="https://okcthouder.github.io/tags/javascript/"/>
    
      <category term="闭包" scheme="https://okcthouder.github.io/tags/%E9%97%AD%E5%8C%85/"/>
    
      <category term="funtion" scheme="https://okcthouder.github.io/tags/funtion/"/>
    
  </entry>
  
  <entry>
    <title>VMwave Workstation12虚拟机安装OS X 10.11所遇到的各种问题集合(详细版)</title>
    <link href="https://okcthouder.github.io/2017/07/24/10-11%E6%89%80%E9%81%87%E5%88%B0%E7%9A%84%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98%E9%9B%86%E5%90%88-%E8%AF%A6%E7%BB%86%E7%89%88/"/>
    <id>https://okcthouder.github.io/2017/07/24/10-11所遇到的各种问题集合-详细版/</id>
    <published>2017-07-24T08:09:29.000Z</published>
    <updated>2017-07-25T12:09:26.640Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>最近笔者闲着无聊，由于一直挺仰慕mac大法，所以想装个mac系统来玩玩。虽然说过程不是很难，但是出现的各种小问题还是挺多的，所以在这里跟大家分享一下我的解决方法。</p>
<p>1.首先，当然是安装工具：</p>
<ul>
<li>Mac OS X 10.11 镜像文件（链接：<a href="http://pan.baidu.com/s/1pL8HE59" target="_blank" rel="external">http://pan.baidu.com/s/1pL8HE59</a> 密码：cq4d）（此镜像为网络收集，如果觉得有问题自己找谢谢。）</li>
<li>unlocker208文件（链接：<a href="http://pan.baidu.com/s/1bpftVjT" target="_blank" rel="external">http://pan.baidu.com/s/1bpftVjT</a> 密码：dp2g）</li>
<li>VMware Workstation12（<a href="http://blog.sina.com.cn/s/blog_af49f8090102wqmw.html" target="_blank" rel="external">http://blog.sina.com.cn/s/blog_af49f8090102wqmw.html</a>）</li>
</ul>
<p>2.详细教程请查看：<a href="http://jingyan.baidu.com/article/363872ec206a356e4ba16f30.html" target="_blank" rel="external">http://jingyan.baidu.com/article/363872ec206a356e4ba16f30.html</a></p>
<p>在这里我就不再赘述。</p>
 <a id="more"></a>
<h2 id="二、所遇到的问题"><a href="#二、所遇到的问题" class="headerlink" title="二、所遇到的问题"></a>二、所遇到的问题</h2><p>下面来看看我安装后遇到的各种问题：</p>
<h2 id="1-VMware上MAC虚拟机不能上网问题"><a href="#1-VMware上MAC虚拟机不能上网问题" class="headerlink" title="1)  VMware上MAC虚拟机不能上网问题"></a>1)  VMware上MAC虚拟机不能上网问题</h2><p>首先最大的问题当然就是没网啦，别急，且听我慢慢道来：</p>
<h3 id="解决方法-步骤"><a href="#解决方法-步骤" class="headerlink" title="解决方法/步骤"></a>解决方法/步骤</h3><h4 id="1-从本机中选择打开连接网络，选择本地连接。如果是无线网可以选择无线网。"><a href="#1-从本机中选择打开连接网络，选择本地连接。如果是无线网可以选择无线网。" class="headerlink" title="1.从本机中选择打开连接网络，选择本地连接。如果是无线网可以选择无线网。"></a>1.从本机中选择打开连接网络，选择本地连接。如果是无线网可以选择无线网。</h4><p><img src="http://img.blog.csdn.net/20170424190230322?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="2-选择属性，点击共享按钮。"><a href="#2-选择属性，点击共享按钮。" class="headerlink" title="2.选择属性，点击共享按钮。"></a>2.选择属性，点击共享按钮。</h4><p><img src="http://img.blog.csdn.net/20170424190316370?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="3-将internet连接共享下面两个选项都选中，然后在家庭网络连接选择VMware-Network-Adapter-VMnet1。"><a href="#3-将internet连接共享下面两个选项都选中，然后在家庭网络连接选择VMware-Network-Adapter-VMnet1。" class="headerlink" title="3.将internet连接共享下面两个选项都选中，然后在家庭网络连接选择VMware Network Adapter VMnet1。"></a>3.将internet连接共享下面两个选项都选中，然后在家庭网络连接选择VMware Network Adapter VMnet1。</h4><p><img src="http://img.blog.csdn.net/20170430203759981?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="4-在安装的虚拟机中选择虚拟机-gt-设置选项。"><a href="#4-在安装的虚拟机中选择虚拟机-gt-设置选项。" class="headerlink" title="4.在安装的虚拟机中选择虚拟机-&gt;设置选项。"></a>4.在安装的虚拟机中选择虚拟机-&gt;设置选项。</h4><p><img src="http://img.blog.csdn.net/20170424190515128?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="5-点击网络适配器，将网络连接改成仅主机模式（Host-only），然后在右侧选择主机模式，点击确定。"><a href="#5-点击网络适配器，将网络连接改成仅主机模式（Host-only），然后在右侧选择主机模式，点击确定。" class="headerlink" title="5.点击网络适配器，将网络连接改成仅主机模式（Host-only），然后在右侧选择主机模式，点击确定。"></a>5.点击网络适配器，将网络连接改成仅主机模式（Host-only），然后在右侧选择主机模式，点击确定。</h4><p><img src="http://img.blog.csdn.net/20170424190604613?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="6-进入Mac系统，选择设置，进入网络设置"><a href="#6-进入Mac系统，选择设置，进入网络设置" class="headerlink" title="6.进入Mac系统，选择设置，进入网络设置"></a>6.进入Mac系统，选择设置，进入网络设置</h4><p><img src="http://img.blog.csdn.net/20170424190642379?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="7-配置Ipv4选择设置DHCP，点击应用即可开始上网。"><a href="#7-配置Ipv4选择设置DHCP，点击应用即可开始上网。" class="headerlink" title="7.配置Ipv4选择设置DHCP，点击应用即可开始上网。"></a>7.配置Ipv4选择设置DHCP，点击应用即可开始上网。</h4><h2 id="2-OS-X-10-11-El-Capitan-无法连接Apple-store-和登录Apple-ID的问题"><a href="#2-OS-X-10-11-El-Capitan-无法连接Apple-store-和登录Apple-ID的问题" class="headerlink" title="2)OS X 10.11 El Capitan 无法连接Apple store 和登录Apple ID的问题"></a>2)<a href="http://blog.csdn.net/qq_25131687/article/details/52194202" target="_blank" rel="external">OS X 10.11 El Capitan 无法连接Apple store 和登录Apple ID的问题</a></h2><h4 id="1-step-1"><a href="#1-step-1" class="headerlink" title="1.step 1"></a>1.step 1</h4><p>强制退出Apple store进程</p>
<h4 id="2-step-2"><a href="#2-step-2" class="headerlink" title="2. step 2"></a>2. step 2</h4><p>打开terminal终端（在launch中搜索终端），输入以下命令：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo pkill <span class="number">-9</span> -f Account    </div><div class="line"></div><div class="line">sudo rm $HOME/Library/Accounts<span class="comment">/*</span></div></pre></td></tr></table></figure>
<p> 进行此操作时需要提供管理员密码，输入密码敲回车就行了。</p>
<h4 id="3-step-3"><a href="#3-step-3" class="headerlink" title="3.step 3"></a>3.step 3</h4><p>完成前面两步你已经可以进入apple store了，但是你发现你的apple ID无法登陆：</p>
<p>This action cant be Completed!</p>
<p>这时你可以terminal终端输入以下命令：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">sudo mkdir -p /Users/Shared     </div><div class="line"></div><div class="line">sudo chown root:wheel /Users/Shared    </div><div class="line"></div><div class="line">sudo chmod -R <span class="number">1777</span> /Users/Shared</div></pre></td></tr></table></figure>
<p>至此，你的Apple ID就可以在Apple store上Login了。</p>
<h2 id="3-苹果ID注册最后一步总是显示-如需帮助，请联系iTunes支持"><a href="#3-苹果ID注册最后一步总是显示-如需帮助，请联系iTunes支持" class="headerlink" title="3)苹果ID注册最后一步总是显示 如需帮助，请联系iTunes支持"></a>3)苹果ID注册最后一步总是显示 如需帮助，请联系iTunes支持</h2><p>由于我的apple id是刚刚注册的，登陆apple store后提示我还没有完善资料什么的，所以我就去填资料</p>
<p>填完资料发现老是出现上面的那一句，继续不了。</p>
<p>所以我又开始了尝试</p>
<h4 id="1-首先在iTunes软件上面注册Apple-ID帐号时，注意要把提供付款方式选择为“银联UnionPay”，目前因为iTunes软件版本更新了不能像以前那样不绑定银行卡就可以注册Apple-ID帐号。"><a href="#1-首先在iTunes软件上面注册Apple-ID帐号时，注意要把提供付款方式选择为“银联UnionPay”，目前因为iTunes软件版本更新了不能像以前那样不绑定银行卡就可以注册Apple-ID帐号。" class="headerlink" title="1.首先在iTunes软件上面注册Apple ID帐号时，注意要把提供付款方式选择为“银联UnionPay”，目前因为iTunes软件版本更新了不能像以前那样不绑定银行卡就可以注册Apple ID帐号。"></a>1.首先在iTunes软件上面注册Apple ID帐号时，注意要把提供<a href="https://www.baidu.com/s?wd=%E4%BB%98%E6%AC%BE%E6%96%B9%E5%BC%8F&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Yvm1TLPvn3PWw9mynLrj640ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EnW0dnWc1nHn4PHfsnWT3Pj6zPs" target="_blank" rel="external">付款方式</a>选择为“<a href="https://www.baidu.com/s?wd=%E9%93%B6%E8%81%94&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Yvm1TLPvn3PWw9mynLrj640ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EnW0dnWc1nHn4PHfsnWT3Pj6zPs" target="_blank" rel="external">银联</a>UnionPay”，目前因为iTunes软件版本更新了不能像以前那样不绑定银行卡就可以注册Apple ID帐号。</h4><p><img src="http://img.blog.csdn.net/20170424190735973?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="2-然后填写银行卡以及输入银行预留手机号码。-注意：手机号码一定是要和银行卡绑定在一起的才可以使用。"><a href="#2-然后填写银行卡以及输入银行预留手机号码。-注意：手机号码一定是要和银行卡绑定在一起的才可以使用。" class="headerlink" title="2.然后填写银行卡以及输入银行预留手机号码。(注意：手机号码一定是要和银行卡绑定在一起的才可以使用。)"></a>2.然后填写银行卡以及输入银行预留手机号码。(注意：手机号码一定是要和银行卡绑定在一起的才可以使用。)</h4><p><img src="http://img.blog.csdn.net/20170424190825299?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="3-接下来在帐单寄送地址下方依次将个人的姓、名、街道地址、所在地区、邮编、省份、手机号码填写正确完整。"><a href="#3-接下来在帐单寄送地址下方依次将个人的姓、名、街道地址、所在地区、邮编、省份、手机号码填写正确完整。" class="headerlink" title="3.接下来在帐单寄送地址下方依次将个人的姓、名、街道地址、所在地区、邮编、省份、手机号码填写正确完整。"></a>3.接下来在帐单寄送地址下方依次将个人的姓、名、街道地址、所在地区、邮编、省份、手机号码填写正确完整。</h4><p><img src="http://img.blog.csdn.net/20170424190901802?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="4-点击创建Apple-ID，进入下一步。"><a href="#4-点击创建Apple-ID，进入下一步。" class="headerlink" title="4.点击创建Apple ID，进入下一步。"></a>4.点击创建Apple ID，进入下一步。</h4><p><img src="http://img.blog.csdn.net/20170424190938535?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="5-然后收取绑定银行的短信验证码输入里面进行验证。"><a href="#5-然后收取绑定银行的短信验证码输入里面进行验证。" class="headerlink" title="5.然后收取绑定银行的短信验证码输入里面进行验证。"></a>5.然后收取绑定银行的<a href="https://www.baidu.com/s?wd=%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Yvm1TLPvn3PWw9mynLrj640ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EnW0dnWc1nHn4PHfsnWT3Pj6zPs" target="_blank" rel="external">短信验证码</a>输入里面进行验证。</h4><p><img src="http://img.blog.csdn.net/20170424191016740?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>填入验证码就可以完美解决，我也试过用银行卡的方式，但是还是不行，最后尝试了银联这个就OK了。</p>
<h2 id="三、补充"><a href="#三、补充" class="headerlink" title="三、补充"></a>三、补充</h2><p>对了，补充一下，可能安装后会发现虚拟机没办法占全屏，只要安装VMwave Tools既可以完美解决，至于卡顿问题，我笔记本是8G内存，我分了4G在虚拟机，相对来说比较不卡，也可以下载一个叫做beamoff的工具,在mac osx下解压即可消除卡顿的感觉。</p>
<p>下载链接 :   <a href="http://download.csdn.net/detail/u013803262/9702291" target="_blank" rel="external">http://download.csdn<strong>.NET</strong>/detail/u013803262/9702291</a></p>
<p>具体解决方法参考：<a href="http://blog.csdn.net/u013803262/article/details/53467693" target="_blank" rel="external">http://blog.csdn.net/u013803262/article/details/53467693</a></p>
<p>好了，以上就是我装mac虚拟机所遇到的比较难缠的问题，分享给大家一下。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、前言&quot;&gt;&lt;a href=&quot;#一、前言&quot; class=&quot;headerlink&quot; title=&quot;一、前言&quot;&gt;&lt;/a&gt;一、前言&lt;/h2&gt;&lt;p&gt;最近笔者闲着无聊，由于一直挺仰慕mac大法，所以想装个mac系统来玩玩。虽然说过程不是很难，但是出现的各种小问题还是挺多的，所以在这里跟大家分享一下我的解决方法。&lt;/p&gt;
&lt;p&gt;1.首先，当然是安装工具：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mac OS X 10.11 镜像文件（链接：&lt;a href=&quot;http://pan.baidu.com/s/1pL8HE59&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://pan.baidu.com/s/1pL8HE59&lt;/a&gt; 密码：cq4d）（此镜像为网络收集，如果觉得有问题自己找谢谢。）&lt;/li&gt;
&lt;li&gt;unlocker208文件（链接：&lt;a href=&quot;http://pan.baidu.com/s/1bpftVjT&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://pan.baidu.com/s/1bpftVjT&lt;/a&gt; 密码：dp2g）&lt;/li&gt;
&lt;li&gt;VMware Workstation12（&lt;a href=&quot;http://blog.sina.com.cn/s/blog_af49f8090102wqmw.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.sina.com.cn/s/blog_af49f8090102wqmw.html&lt;/a&gt;）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2.详细教程请查看：&lt;a href=&quot;http://jingyan.baidu.com/article/363872ec206a356e4ba16f30.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://jingyan.baidu.com/article/363872ec206a356e4ba16f30.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在这里我就不再赘述。&lt;/p&gt;
    
    </summary>
    
      <category term="装系统" scheme="https://okcthouder.github.io/categories/%E8%A3%85%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="VMwave" scheme="https://okcthouder.github.io/tags/VMwave/"/>
    
      <category term="OS X 10.11" scheme="https://okcthouder.github.io/tags/OS-X-10-11/"/>
    
      <category term="虚拟机" scheme="https://okcthouder.github.io/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>将应用程序部署到Heroku</title>
    <link href="https://okcthouder.github.io/2017/07/22/%E5%B0%86%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E9%83%A8%E7%BD%B2%E5%88%B0Heroku/"/>
    <id>https://okcthouder.github.io/2017/07/22/将应用程序部署到Heroku/</id>
    <published>2017-07-22T07:51:23.000Z</published>
    <updated>2017-07-25T11:16:11.505Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1-注册"><a href="#1-注册" class="headerlink" title="1.注册"></a>1.注册</h4><h5 id="1-1"><a href="#1-1" class="headerlink" title="1.1"></a>1.1</h5><p>在<a href="http://api/heroku.com/signup注册Hero帐号" target="_blank" rel="external">http://api/heroku.com/signup注册Hero帐号</a></p>
<h5 id="1-2"><a href="#1-2" class="headerlink" title="1.2"></a>1.2</h5><p>访问邮件中的链接并输入密码  </p>
<h5 id="1-3"><a href="#1-3" class="headerlink" title="1.3"></a>1.3</h5><p>从 <a href="http://devcenter.heroku.com/articles/quickstart#step_2_install_the_heroku_toolbelt" target="_blank" rel="external">http://devcenter.heroku.com/articles/quickstart#step_2_install_the_heroku_toolbelt</a> 为你的平台安装安装程序。   </p>
<h5 id="1-4"><a href="#1-4" class="headerlink" title="1.4"></a>1.4</h5><p>打开终端窗口并登陆到Heroku</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">heroku login</div></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="2-配置"><a href="#2-配置" class="headerlink" title="2.配置"></a>2.配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">1.在app.js文件的顶部，添加如下行：</div><div class="line">var port = (process.env.PORT || 3000);</div><div class="line"></div><div class="line">2.将下列行从app.js中移除:</div><div class="line">app.listen(3000);</div><div class="line"></div><div class="line">3.用下列行替换它：</div><div class="line">app.listen(port);</div><div class="line"></div><div class="line">4.在应用程序的根目录中，添加一个名为Procfile的文件并加入如下内容：</div><div class="line">web: node app.js</div><div class="line"></div><div class="line">5.用如下命令安装依赖模块：</div><div class="line">npm install</div><div class="line"></div><div class="line">6.启动应用程序并检查其是否运行正常：</div><div class="line">node app.js</div></pre></td></tr></table></figure>
<h4 id="3-将应用程序提交到heroku"><a href="#3-将应用程序提交到heroku" class="headerlink" title="3.将应用程序提交到heroku"></a>3.将应用程序提交到heroku</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">3.1使用如下命令创建Git库：</div><div class="line">git init</div><div class="line">git add .</div><div class="line">git commit -m &quot;initial commit&quot;</div><div class="line"></div><div class="line">3.2使用如下命令在Heroku上创建应用程序。注意从这一命令返回的URL:</div><div class="line">heroku create --stack cedar</div><div class="line"></div><div class="line">3.3用如下命令将站点发布到Heroku：</div><div class="line">git push heroku master</div><div class="line"></div><div class="line">3.4访问之前得到的URL，可看到所部署的网站了！</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;1-注册&quot;&gt;&lt;a href=&quot;#1-注册&quot; class=&quot;headerlink&quot; title=&quot;1.注册&quot;&gt;&lt;/a&gt;1.注册&lt;/h4&gt;&lt;h5 id=&quot;1-1&quot;&gt;&lt;a href=&quot;#1-1&quot; class=&quot;headerlink&quot; title=&quot;1.1&quot;&gt;&lt;/a&gt;1.1&lt;/h5&gt;&lt;p&gt;在&lt;a href=&quot;http://api/heroku.com/signup注册Hero帐号&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://api/heroku.com/signup注册Hero帐号&lt;/a&gt;&lt;/p&gt;
&lt;h5 id=&quot;1-2&quot;&gt;&lt;a href=&quot;#1-2&quot; class=&quot;headerlink&quot; title=&quot;1.2&quot;&gt;&lt;/a&gt;1.2&lt;/h5&gt;&lt;p&gt;访问邮件中的链接并输入密码  &lt;/p&gt;
&lt;h5 id=&quot;1-3&quot;&gt;&lt;a href=&quot;#1-3&quot; class=&quot;headerlink&quot; title=&quot;1.3&quot;&gt;&lt;/a&gt;1.3&lt;/h5&gt;&lt;p&gt;从 &lt;a href=&quot;http://devcenter.heroku.com/articles/quickstart#step_2_install_the_heroku_toolbelt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://devcenter.heroku.com/articles/quickstart#step_2_install_the_heroku_toolbelt&lt;/a&gt; 为你的平台安装安装程序。   &lt;/p&gt;
&lt;h5 id=&quot;1-4&quot;&gt;&lt;a href=&quot;#1-4&quot; class=&quot;headerlink&quot; title=&quot;1.4&quot;&gt;&lt;/a&gt;1.4&lt;/h5&gt;&lt;p&gt;打开终端窗口并登陆到Heroku&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;heroku login&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="node.js" scheme="https://okcthouder.github.io/categories/node-js/"/>
    
    
      <category term="node.js" scheme="https://okcthouder.github.io/tags/node-js/"/>
    
      <category term="Heroku" scheme="https://okcthouder.github.io/tags/Heroku/"/>
    
  </entry>
  
  <entry>
    <title>Oracle学习笔记(六)</title>
    <link href="https://okcthouder.github.io/2017/07/20/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%85%AD/"/>
    <id>https://okcthouder.github.io/2017/07/20/Oracle学习笔记-六/</id>
    <published>2017-07-20T08:13:29.000Z</published>
    <updated>2017-07-23T08:18:02.628Z</updated>
    
    <content type="html"><![CDATA[<h3 id="46-异常"><a href="#46-异常" class="headerlink" title="46.异常"></a>46.异常</h3><h4 id="1"><a href="#1" class="headerlink" title="(1)"></a>(1)</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span></div><div class="line"></div><div class="line">            v_temp <span class="built_in">number</span>(<span class="number">4</span>);</div><div class="line"></div><div class="line">     <span class="keyword">begin</span></div><div class="line"></div><div class="line">            <span class="keyword">select</span> empno <span class="keyword">into</span> v_temp <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">10</span>;</div><div class="line"></div><div class="line">     exception</div><div class="line"></div><div class="line">            when too_many_rows then</div><div class="line"></div><div class="line">                   dbms_output.put_line('太多记录了');</div><div class="line"></div><div class="line">            when others then</div><div class="line"></div><div class="line">                   dbms_output.put_line('error'); </div><div class="line"></div><div class="line">     <span class="keyword">end</span>;</div></pre></td></tr></table></figure>
  <a id="more"></a>
<h4 id="2"><a href="#2" class="headerlink" title="(2)"></a>(2)</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">declare</span></div><div class="line"></div><div class="line">              v_tempnumber(<span class="number">4</span>);</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">select</span> empno <span class="keyword">into</span> v_temp <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">2222</span>;</div><div class="line"></div><div class="line">       exception</div><div class="line"></div><div class="line">              when no_data_found then</div><div class="line"></div><div class="line">                     dbms_output.put_line('没有该项数据');</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="comment">----------------错误记录日志(用表记录：将系统日志存到数据库便于以后查看) -----------</span></div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">	   创建序列（用来处理递增的ＩＤ）：</div><div class="line"></div><div class="line">       <span class="keyword">create</span> <span class="keyword">sequence</span> seq_errorlog_id <span class="keyword">start</span> <span class="keyword">with</span> <span class="number">1</span> <span class="keyword">increment</span> <span class="keyword">by</span> <span class="number">1</span>;</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">       创建日志表:</div><div class="line"></div><div class="line">       <span class="keyword">create</span> <span class="keyword">table</span> errorlog</div><div class="line"></div><div class="line">       (</div><div class="line"></div><div class="line">       <span class="keyword">id</span> <span class="built_in">number</span> primary <span class="keyword">key</span>,</div><div class="line"></div><div class="line">       errcode <span class="built_in">number</span>,</div><div class="line"></div><div class="line">       errmsg varchar2(<span class="number">1024</span>),</div><div class="line"></div><div class="line">       errdate <span class="built_in">date</span></div><div class="line"></div><div class="line">       );</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">       示例程序：</div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              v_deptno dept.deptno%<span class="keyword">type</span> := <span class="number">10</span>;</div><div class="line"></div><div class="line">              v_errcode  number;</div><div class="line"></div><div class="line">              v_errmsg varchar2(1024);</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">delete</span> <span class="keyword">from</span> dept <span class="keyword">where</span> deptno = v_deptno;</div><div class="line"></div><div class="line">          <span class="keyword">commit</span>;</div><div class="line"></div><div class="line">       exception</div><div class="line"></div><div class="line">              when others then</div><div class="line"></div><div class="line">                     <span class="keyword">rollback</span>;</div><div class="line"></div><div class="line">                            v_errcode:= SQLCODE;</div><div class="line"></div><div class="line">                            v_errmsg:= SQLERRM;</div><div class="line"></div><div class="line">              <span class="keyword">insert</span> <span class="keyword">into</span> errorlog <span class="keyword">values</span> (seq_errorlog_id.nextval, v_errcode,v_errmsg, <span class="keyword">sysdate</span>);</div><div class="line"></div><div class="line">                            <span class="keyword">commit</span>;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<h3 id="47-PL-SQL中的重点cursor-游标-和指针的概念差不多"><a href="#47-PL-SQL中的重点cursor-游标-和指针的概念差不多" class="headerlink" title="47. PL/SQL中的重点cursor(游标)和指针的概念差不多"></a>47. PL/SQL中的重点cursor(游标)和指针的概念差不多</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span></div><div class="line"></div><div class="line">              cursorc <span class="keyword">is</span></div><div class="line"></div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp; //此处的语句不会立刻执行，而是当下面的open c的时候，才会真正去数据库中取数据</div><div class="line"></div><div class="line">              v_emp c%rowtype;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">open</span> c;</div><div class="line"></div><div class="line">                     fetch c into v_emp;</div><div class="line"></div><div class="line">dbms_output.put_line(v_emp.ename); //这样会只输出一条数据 134将使用循环的方法输出每一条记录</div><div class="line"></div><div class="line">         close c;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="comment">----------------------使用do while  循环遍历游标中的每一个数据---------------------</span></div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              <span class="keyword">cursor</span> c <span class="keyword">is</span></div><div class="line"></div><div class="line">                     <span class="keyword">select</span>* <span class="keyword">from</span> emp;</div><div class="line"></div><div class="line">              v_emp c%rowtype;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">open</span> c;    </div><div class="line"></div><div class="line">              loop</div><div class="line"></div><div class="line">                     fetch c into v_emp;</div><div class="line"></div><div class="line">(1)   exit when(c%notfound);  //notfound是oracle中的关键字，作用是判断是否还有下一条数据</div><div class="line"></div><div class="line">(2)   dbms_output.put_line(v_emp.ename);  //(1)(2)的顺序不能颠倒，否则会把最后一条结果再多打印一次。</div><div class="line"></div><div class="line">          <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line"></div><div class="line">          close c;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="comment">------------------------使用while循环，遍历游标---------------------</span></div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              <span class="keyword">cursor</span> c <span class="keyword">is</span></div><div class="line"></div><div class="line">                     <span class="keyword">select</span>* <span class="keyword">from</span> emp;</div><div class="line"></div><div class="line">              v_emp emp%rowtype;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">open</span> c;</div><div class="line"></div><div class="line">              fetch c into v_emp;</div><div class="line"></div><div class="line">              while(c%found) loop</div><div class="line"></div><div class="line">                 dbms_output.put_line(v_emp.ename);</div><div class="line"></div><div class="line">                 fetch c into v_emp;</div><div class="line"></div><div class="line">          <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line"></div><div class="line">          close c;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;s</div><div class="line"></div><div class="line"><span class="comment">------------------------使用for 循环，遍历游标（最方便快捷的方法！）-----------------</span></div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              cursorc <span class="keyword">is</span></div><div class="line"></div><div class="line">                 <span class="keyword">select</span> * <span class="keyword">from</span> emp;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">for</span> v_emp <span class="keyword">in</span> c <span class="keyword">loop</span></div><div class="line"></div><div class="line">                     dbms_output.put_line(v_emp.ename);</div><div class="line"></div><div class="line">              endloop;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<h4 id="带参数的游标（相当于函数）"><a href="#带参数的游标（相当于函数）" class="headerlink" title="带参数的游标（相当于函数）"></a>带参数的游标（相当于函数）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span></div><div class="line"></div><div class="line">       <span class="keyword">cursor</span> c(v_deptno emp.deptno%<span class="keyword">type</span>, v_job emp.job%<span class="keyword">type</span>)</div><div class="line"></div><div class="line">       <span class="keyword">is</span></div><div class="line"></div><div class="line">          <span class="keyword">select</span> ename, sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno=v_deptno <span class="keyword">and</span> job=v_job; </div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line"></div><div class="line">       forv_temp <span class="keyword">in</span> c(<span class="number">30</span>, <span class="string">'CLERK'</span>) <span class="keyword">loop</span></div><div class="line"></div><div class="line">              dbms_output.put_line(v_temp.ename);</div><div class="line"></div><div class="line">       endloop;</div><div class="line"></div><div class="line"><span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<h4 id="可更新的游标"><a href="#可更新的游标" class="headerlink" title="可更新的游标"></a>可更新的游标</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span></div><div class="line"></div><div class="line">              cursorc </div><div class="line"></div><div class="line">              <span class="keyword">is</span></div><div class="line"></div><div class="line">                 <span class="keyword">select</span> * <span class="keyword">from</span> emp2 <span class="keyword">for</span> <span class="keyword">update</span>;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">          <span class="keyword">for</span> v_temp <span class="keyword">in</span> c <span class="keyword">loop</span></div><div class="line"></div><div class="line">              <span class="keyword">if</span>(v_temp.sal&lt; <span class="number">2000</span>) <span class="keyword">then</span></div><div class="line"></div><div class="line">                     <span class="keyword">update</span> emp2 <span class="keyword">set</span> sal = sal * <span class="number">2</span> <span class="keyword">where</span> <span class="keyword">current</span> <span class="keyword">of</span> c;</div><div class="line"></div><div class="line">             elsif (v_temp.sal =5000) then</div><div class="line"></div><div class="line">              deletefrom emp2 where current of c;</div><div class="line"></div><div class="line">              <span class="keyword">end</span> <span class="keyword">if</span>;</div><div class="line"></div><div class="line">            <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line"></div><div class="line">            <span class="keyword">commit</span>;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<h3 id="48-store-procedure存储过程-带有名字的程序块"><a href="#48-store-procedure存储过程-带有名字的程序块" class="headerlink" title="48. store procedure存储过程(带有名字的程序块)"></a>48. store procedure存储过程(带有名字的程序块)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">createor <span class="keyword">replace</span> <span class="keyword">procedure</span> p</div><div class="line"></div><div class="line">           <span class="keyword">is</span><span class="comment">--除了这两句替代declare，下面的语句全部都一样  </span></div><div class="line"></div><div class="line">        <span class="keyword">cursor</span> c <span class="keyword">is</span></div><div class="line"></div><div class="line">                  <span class="keyword">select</span> * <span class="keyword">from</span> emp2 <span class="keyword">for</span> <span class="keyword">update</span>;</div><div class="line"></div><div class="line">    <span class="keyword">begin</span></div><div class="line"></div><div class="line">         <span class="keyword">for</span> v_emp <span class="keyword">in</span> c <span class="keyword">loop</span></div><div class="line"></div><div class="line">           <span class="keyword">if</span>(v_emp.deptno= <span class="number">10</span>) <span class="keyword">then</span></div><div class="line"></div><div class="line">                  updateemp2 <span class="keyword">set</span> sal = sal +<span class="number">10</span> <span class="keyword">where</span> <span class="keyword">current</span> <span class="keyword">of</span> c;</div><div class="line"></div><div class="line">           elseif(v_emp.deptno =20) then</div><div class="line"></div><div class="line">                  updateemp2 <span class="keyword">set</span> sal =  sal + <span class="number">20</span> <span class="keyword">where</span> <span class="keyword">current</span> ofc;</div><div class="line"></div><div class="line">           else</div><div class="line"></div><div class="line">                  updateemp2 <span class="keyword">set</span> sal = sal + <span class="number">50</span> <span class="keyword">where</span> <span class="keyword">current</span> <span class="keyword">of</span> c;</div><div class="line"></div><div class="line">           endif;</div><div class="line"></div><div class="line">        <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line"></div><div class="line">      <span class="keyword">commit</span>;</div><div class="line"></div><div class="line">     <span class="keyword">end</span>;</div><div class="line"></div><div class="line">    执行存储过程的两种方法：</div><div class="line"></div><div class="line">    （1）exec p;(p是存储过程的名称)</div><div class="line"></div><div class="line">    （2）<span class="keyword">begin</span></div><div class="line"></div><div class="line">                  p;</div><div class="line"></div><div class="line">            <span class="keyword">end</span>;</div><div class="line"></div><div class="line">           /</div></pre></td></tr></table></figure>
<h4 id="带参数的存储过程"><a href="#带参数的存储过程" class="headerlink" title="带参数的存储过程"></a>带参数的存储过程</h4><p>先创建存储过程：（in标识传入参数，out标识传出参数，默认为传入参数）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">       createor <span class="keyword">replace</span> <span class="keyword">procedure</span> p</div><div class="line"></div><div class="line">              (v_ain <span class="built_in">number</span>, v_b <span class="built_in">number</span>, v_ret <span class="keyword">out</span> <span class="built_in">number</span>, v_temp inout <span class="built_in">number</span>)</div><div class="line"></div><div class="line">       <span class="keyword">is</span></div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">if</span>(v_a&gt; v_b) <span class="keyword">then</span></div><div class="line"></div><div class="line">                     v_ret:= v_a;</div><div class="line"></div><div class="line">              else</div><div class="line"></div><div class="line">                     v_ret:= v_b;</div><div class="line"></div><div class="line">              endif;</div><div class="line"></div><div class="line">              v_temp:= v_temp + 1;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line">再调用：</div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              v_a  <span class="built_in">number</span> := <span class="number">3</span>;</div><div class="line"></div><div class="line">              v_b  number := 4;</div><div class="line"></div><div class="line">              v_retnumber;</div><div class="line"></div><div class="line">              v_tempnumber := 5;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              p(v_a,v_b, v_ret, v_temp);</div><div class="line"></div><div class="line">              dbms_output.put_line(v_ret);</div><div class="line"></div><div class="line">              dbms_output.put_line(v_temp);</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<h4 id="删除存储过程"><a href="#删除存储过程" class="headerlink" title="删除存储过程"></a>删除存储过程</h4><p>​       dropprocedure p;</p>
<h3 id="49-创建函数计算个人所得税的税率"><a href="#49-创建函数计算个人所得税的税率" class="headerlink" title="49. 创建函数计算个人所得税的税率"></a>49. 创建<strong>函数</strong>计算个人所得税的税率</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">createor replace function sal_tax</div><div class="line"></div><div class="line">             (v_sal  number)    </div><div class="line"></div><div class="line">             returnnumber</div><div class="line"></div><div class="line">      is</div><div class="line"></div><div class="line">      begin</div><div class="line"></div><div class="line">             if(v_sal&lt; 2000) then</div><div class="line"></div><div class="line">                    return0.10;</div><div class="line"></div><div class="line">             elsif(v_sal&lt;2750) then</div><div class="line"></div><div class="line">                    return0.15;</div><div class="line"></div><div class="line">             else</div><div class="line"></div><div class="line">                    return0.20;</div><div class="line"></div><div class="line">             endif;</div><div class="line"></div><div class="line">      end;</div></pre></td></tr></table></figure>
<h3 id="50-创建触发器（trigger）"><a href="#50-创建触发器（trigger）" class="headerlink" title="50. 创建触发器（trigger）"></a>50. 创建触发器（trigger）</h3><p>触发器不能单独的存在，必须依附在某一张表上</p>
<p>写主语 谓语 宾语 游戏</p>
<p>​       创建触发器的依附表：       </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">     createtable emp2_log</div><div class="line"></div><div class="line">     (</div><div class="line"></div><div class="line">     enamevarchar2(30) ,</div><div class="line"></div><div class="line">     eactionvarchar2(20),</div><div class="line"></div><div class="line">     etimedate</div><div class="line"></div><div class="line">     );</div><div class="line">     <span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> trig</div><div class="line"></div><div class="line"><span class="keyword">after</span> <span class="keyword">insert</span> <span class="keyword">or</span> <span class="keyword">delete</span> orupdate <span class="keyword">on</span> emp2 <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span> <span class="comment">--加上此句，每更新一行，触发一次，不加入则值触发一次</span></div><div class="line"></div><div class="line">     <span class="keyword">begin</span></div><div class="line"></div><div class="line">            ifinserting <span class="keyword">then</span></div><div class="line"></div><div class="line">                   insertinto emp2_log <span class="keyword">values</span>(<span class="keyword">USER</span>, <span class="string">'insert'</span>, <span class="keyword">sysdate</span>);</div><div class="line"></div><div class="line">            elsifupdating then</div><div class="line"></div><div class="line">                   insertinto emp2_log values(USER, '<span class="keyword">update</span><span class="string">', sysdate);</span></div><div class="line"></div><div class="line">            elsifdeleting then</div><div class="line"></div><div class="line">                   insertinto emp2_log values(USER, '<span class="keyword">delete</span><span class="string">', sysdate);</span></div><div class="line"></div><div class="line">            endif;</div><div class="line"></div><div class="line">     end;</div></pre></td></tr></table></figure>
<h3 id="51-触发器用法之一：通过触发器更新约束的相关数据"><a href="#51-触发器用法之一：通过触发器更新约束的相关数据" class="headerlink" title="51.触发器用法之一：通过触发器更新约束的相关数据"></a>51.触发器用法之一：通过触发器更新约束的相关数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">createor <span class="keyword">replace</span> <span class="keyword">trigger</span> trig</div><div class="line"></div><div class="line">              afterupdate <span class="keyword">on</span> dept</div><div class="line"></div><div class="line">              foreach <span class="keyword">row</span></div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              updateemp <span class="keyword">set</span> deptno =:NEW.deptno <span class="keyword">where</span> deptno =: OLD.deptno;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line">       <span class="comment">--只编译不显示的解决办法 set serveroutput on;</span></div></pre></td></tr></table></figure>
<h3 id="52-通过创建存储过程完成递归"><a href="#52-通过创建存储过程完成递归" class="headerlink" title="52.通过创建存储过程完成递归"></a>52.通过创建存储过程完成递归</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">       createor replace procedure p(v_pid article.pid%type,v_level binary_integer) is</div><div class="line"></div><div class="line">              cursorc is select * from article where pid = v_pid;</div><div class="line"></div><div class="line">              v_preStrvarchar2(1024) := '';</div><div class="line"></div><div class="line">       begin</div><div class="line"></div><div class="line">         for i in 0..v_leave loop</div><div class="line"></div><div class="line">              v_preStr:= v_preStr || '';</div><div class="line"></div><div class="line">         end loop;</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">         for v_article in c loop</div><div class="line"></div><div class="line">              dbms_output.put_line(v_article.cont);</div><div class="line"></div><div class="line">              if(v_article.isleaf= 0) then</div><div class="line"></div><div class="line">                     p(v_article.id);</div><div class="line"></div><div class="line">              endif;</div><div class="line"></div><div class="line">              endloop;</div><div class="line"></div><div class="line">       end;</div><div class="line"></div><div class="line">-------------------------------查看当前用户下有哪些表---</div><div class="line"></div><div class="line">       首先，用这个用户登录然后使用语句：</div><div class="line"></div><div class="line">       select* from tab;</div><div class="line"></div><div class="line">       </div><div class="line"></div><div class="line">-----------------------------用Oracle进行分页！--------------</div><div class="line"></div><div class="line">       因为Oracle中的隐含字段rownum不支持'&gt;'所以：</div><div class="line"></div><div class="line">       select* from (</div><div class="line"></div><div class="line">              selectrownum rn, t.* from (</div><div class="line"></div><div class="line">                     select* from t_user where user_id &lt;&gt; 'root'</div><div class="line"></div><div class="line">              )t where rownum &lt;6</div><div class="line"></div><div class="line">       )where rn &gt;3</div><div class="line"></div><div class="line">------------------------Oracle下面的清屏命令----------------</div><div class="line"></div><div class="line">       clearscreen; 或者 cle scr;</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">-----------将创建好的guohailong的这个用户的密码改为abc--------------</div><div class="line"></div><div class="line">   alter user guohailong identified by abc</div><div class="line"></div><div class="line">    --当密码使用的是数字的时候可能会不行</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;46-异常&quot;&gt;&lt;a href=&quot;#46-异常&quot; class=&quot;headerlink&quot; title=&quot;46.异常&quot;&gt;&lt;/a&gt;46.异常&lt;/h3&gt;&lt;h4 id=&quot;1&quot;&gt;&lt;a href=&quot;#1&quot; class=&quot;headerlink&quot; title=&quot;(1)&quot;&gt;&lt;/a&gt;(1)&lt;/h4&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;declare&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            v_temp &lt;span class=&quot;built_in&quot;&gt;number&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;begin&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; empno &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; v_temp &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; deptno = &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     exception&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            when too_many_rows then&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                   dbms_output.put_line(&#39;太多记录了&#39;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            when others then&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                   dbms_output.put_line(&#39;error&#39;); &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Oracle" scheme="https://okcthouder.github.io/categories/Oracle/"/>
    
    
      <category term="Oracle sql" scheme="https://okcthouder.github.io/tags/Oracle-sql/"/>
    
  </entry>
  
  <entry>
    <title>Oracle学习笔记(五)</title>
    <link href="https://okcthouder.github.io/2017/07/19/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%94/"/>
    <id>https://okcthouder.github.io/2017/07/19/Oracle学习笔记-五/</id>
    <published>2017-07-19T08:19:13.000Z</published>
    <updated>2017-07-23T08:20:59.937Z</updated>
    
    <content type="html"><![CDATA[<h1 id="PL-SQL-过程化SQL语言"><a href="#PL-SQL-过程化SQL语言" class="headerlink" title="PL_SQL(过程化SQL语言)"></a>PL_SQL(过程化SQL语言)</h1><h3 id="38-在客户端输出helloworld"><a href="#38-在客户端输出helloworld" class="headerlink" title="38. 在客户端输出helloworld"></a>38. 在客户端输出helloworld</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">       <span class="keyword">set</span> serveroutput <span class="keyword">on</span>;//默认是off，设成on是让Oracle可以在客户端输出数据 </div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line"></div><div class="line">       dbms_output.put_line(<span class="string">'helloworld'</span>);</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line">       /</div><div class="line"></div><div class="line"><span class="comment">----------------pl/sql变量的赋值与输出----</span></div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              v_name varchar2(<span class="number">20</span>);//声明变量v_name变量的声明以v_开头</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              v_name:= <span class="string">'myname'</span>;</div><div class="line"></div><div class="line">              dbms_output.put_line(v_name);</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line">       /</div></pre></td></tr></table></figure>
  <a id="more"></a>
<h3 id="39-pl-sql对于异常的处理-除数为0"><a href="#39-pl-sql对于异常的处理-除数为0" class="headerlink" title="39. pl/sql对于异常的处理(除数为0)"></a>39. pl/sql对于异常的处理(除数为0)</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> declare</div><div class="line"></div><div class="line">              v_num number := 0;</div><div class="line"></div><div class="line">       begin</div><div class="line"></div><div class="line">              v_num:= 2/v_num;</div><div class="line"></div><div class="line">              dbms_output.put_line(v_num);</div><div class="line"></div><div class="line">**       exception**</div><div class="line"></div><div class="line">**              when others then**</div><div class="line"></div><div class="line">**              dbms_output.put_line('error');**</div><div class="line"></div><div class="line">       end;</div><div class="line"></div><div class="line">       /</div></pre></td></tr></table></figure>
<h3 id="40-变量的声明"><a href="#40-变量的声明" class="headerlink" title="40. 变量的声明"></a>40. 变量的声明</h3><p>​       binary_integer:整数，主要用来计数而不是用来表示字段类型   比number效率高</p>
<p>​       number:数字类型</p>
<p>​       char:定长字符串</p>
<p>​       varchar2：变长字符串</p>
<p>​       date：日期</p>
<p>​       long：字符串，最长2GB</p>
<p>​       boolean：布尔类型，可以取值true，false，null//最好给一初值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">----------变量的声明，使用 '%type'属性---------</span></div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              v_empno <span class="built_in">number</span>(<span class="number">4</span>);</div><div class="line"></div><div class="line">              v_empno2 emp.empno%type;</div><div class="line"></div><div class="line">              v_empno3 v_empno2%type;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              dbms_output.put_line(<span class="string">'Test'</span>);</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line">       /</div><div class="line"></div><div class="line">       <span class="comment">--使用%type属性，可以使变量的声明根据表字段的类型自动变换，省去了维护的麻烦，而且%type属性，可以用于变量身上</span></div></pre></td></tr></table></figure>
<h3 id="41-组合变量"><a href="#41-组合变量" class="headerlink" title="41.组合变量"></a>41.组合变量</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">---------------Table变量类型(相当于java里面的数组)--------------------</span></div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              <span class="keyword">type</span> type_table_emp_empno <span class="keyword">is</span> <span class="keyword">table</span> <span class="keyword">of</span> emp.empno%<span class="keyword">type</span> <span class="keyword">index</span> <span class="keyword">by</span> binary_integer;</div><div class="line"></div><div class="line">                     v_empnostype_table type_table_empno;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              v_empnos(<span class="number">0</span>):= <span class="number">7345</span>;</div><div class="line"></div><div class="line">              v_empnos(-1):=9999;</div><div class="line"></div><div class="line">              dbms_output.put_line(v_empnos(-1));</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<h3 id="42-Record变量类型（相当于Java里面的类）"><a href="#42-Record变量类型（相当于Java里面的类）" class="headerlink" title="42. Record变量类型（相当于Java里面的类）"></a>42. Record变量类型（相当于Java里面的类）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">declare</span></div><div class="line"></div><div class="line">              <span class="keyword">type</span> type_record_dept <span class="keyword">is</span> <span class="built_in">record</span></div><div class="line"></div><div class="line">              (</div><div class="line"></div><div class="line">                     deptno dept.deptno%<span class="keyword">type</span>,</div><div class="line"></div><div class="line">                     dname dept.dname%<span class="keyword">type</span>,</div><div class="line"></div><div class="line">                     loc dept.loc%<span class="keyword">type</span></div><div class="line"></div><div class="line">              );</div><div class="line"></div><div class="line">              v_temp type_record_dept;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              v_temp.deptno:=<span class="number">50</span>;</div><div class="line"></div><div class="line">              v_temp.dname:='aaaa';</div><div class="line"></div><div class="line">              v_temp.loc:='bj';</div><div class="line"></div><div class="line">              dbms_output.put_line(v_temp.deptno|| ' ' || v_temp.dname);</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line"><span class="comment">-----------使用 %rowtype声明record变量，直接参照表来声明record-------------------</span></div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              v_temp dept%rowtype;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              v_temp.deptno:=<span class="number">50</span>;</div><div class="line"></div><div class="line">              v_temp.dname:='aaaa';</div><div class="line"></div><div class="line">              v_temp.loc:='bj';</div><div class="line"></div><div class="line">       dbms_output.put_line(vtemp.deptno || '' || v temp.dname)                 </div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<p>​       </p>
<h3 id="43-select语句的运用-必须保证select语句有相应的返回记录"><a href="#43-select语句的运用-必须保证select语句有相应的返回记录" class="headerlink" title="43. select语句的运用(必须保证select语句有相应的返回记录)"></a>43. select语句的运用(必须保证select语句有相应的返回记录)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">declare</span></div><div class="line"></div><div class="line">              v_ename emp.ename%<span class="keyword">type</span>;</div><div class="line"></div><div class="line">              v_sal emp.sal%type;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">select</span> ename,sal <span class="keyword">into</span> v_ename,v_sal <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7369</span>;</div><div class="line"></div><div class="line">              dbms_output.put_line(v_ename|| '' || v_sal);</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line"><span class="comment">-------------------------select语句的应用（record）------------------------------</span></div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              v_emp emp%rowtype;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">select</span> * <span class="keyword">into</span> v_emp <span class="keyword">from</span> emp <span class="keyword">where</span> empno=<span class="number">7369</span>;</div><div class="line"></div><div class="line">              dbms_output_line(v_emp.ename);</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line"><span class="comment">------------- insert语句的应用 -----------------------------</span></div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              v_deptno dept.deptno%<span class="keyword">type</span> := <span class="number">50</span>;</div><div class="line"></div><div class="line">              v_dname dept.dname%type :='aaa';</div><div class="line"></div><div class="line">              v_loc dept.loc%type := 'bj';</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">insert</span> <span class="keyword">into</span> dept2 <span class="keyword">values</span>(v_deptno,v_dname,v_loc);</div><div class="line"></div><div class="line">              <span class="keyword">commit</span>;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">       <span class="comment">-------------update 语句的应用------------------------------</span></div><div class="line"></div><div class="line">       <span class="keyword">declare</span></div><div class="line"></div><div class="line">              v_deptno emp2.deptno%<span class="keyword">type</span> := <span class="number">50</span>;</div><div class="line"></div><div class="line">              v_count  number;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">update</span> emp2 <span class="keyword">set</span> sal = sal/<span class="number">2</span> <span class="keyword">where</span> deptno =v_deptno;</div><div class="line"></div><div class="line">              dbms_output.put_line(sql%rowcount || ‘条记录被影响’);</div><div class="line"></div><div class="line">              <span class="keyword">commit</span>;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<p>注：sql%rowcount统计上一条sql语句更新的记录条数</p>
<h3 id="44-ddl语言，数据定义语言"><a href="#44-ddl语言，数据定义语言" class="headerlink" title="44.ddl语言，数据定义语言"></a>44.ddl语言，数据定义语言</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"> begin</div><div class="line"></div><div class="line">              execute immediate 'create table T (nnn varchar(30) default ''a'')';</div><div class="line"></div><div class="line">       end;</div><div class="line"></div><div class="line">------------------ifelse语句--------------------------------------</div><div class="line"></div><div class="line">    declare</div><div class="line"></div><div class="line">              v_sal emp.sal%type;</div><div class="line"></div><div class="line">    begin</div><div class="line"></div><div class="line">              select sal into v_sal from emp where empno = 7369;</div><div class="line"></div><div class="line">       if(v_sal&lt; 2000) then</div><div class="line"></div><div class="line">              dbms_output.put_line('low');</div><div class="line"></div><div class="line">       els if(v_sal &gt; 2000) then</div><div class="line"></div><div class="line">              dbms_output.put_line('middle');</div><div class="line"></div><div class="line">       else</div><div class="line"></div><div class="line">              dbms_output.put_line('height');</div><div class="line"></div><div class="line">       end if;</div><div class="line"></div><div class="line">     end;</div></pre></td></tr></table></figure>
<h3 id="45-循环"><a href="#45-循环" class="headerlink" title="45. 循环"></a>45. 循环</h3><h4 id="do-while-循环"><a href="#do-while-循环" class="headerlink" title="do while 循环"></a>do while 循环</h4><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">declare</div><div class="line"></div><div class="line">            i binary_integer := 1;</div><div class="line"></div><div class="line">     begin</div><div class="line"></div><div class="line">            loop</div><div class="line"></div><div class="line">                          dbms_output.put_line(i);</div><div class="line"></div><div class="line">                          i:= i + 1;</div><div class="line"></div><div class="line">                   exit when (i&gt;=11);</div><div class="line"></div><div class="line">            end loop;</div><div class="line"></div><div class="line">     end;</div></pre></td></tr></table></figure>
<h4 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span></div><div class="line"></div><div class="line">              j binary_integer := <span class="number">1</span>;</div><div class="line"></div><div class="line">       <span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">while</span> j &lt; <span class="number">11</span> <span class="keyword">loop</span></div><div class="line"></div><div class="line">                     dbms_output.put_line(j);</div><div class="line"></div><div class="line">              j:=j+1;</div><div class="line"></div><div class="line">              <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<h4 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">begin</span></div><div class="line"></div><div class="line">              <span class="keyword">for</span> k <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span> <span class="keyword">loop</span></div><div class="line"></div><div class="line">                     dbms_output.put_line(k);</div><div class="line"></div><div class="line">              <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line"></div><div class="line">              for k in reverse 1..10 loop</div><div class="line"></div><div class="line">                     dbms_output.put_line(k);</div><div class="line"></div><div class="line">              <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line"></div><div class="line">       <span class="keyword">end</span>;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;PL-SQL-过程化SQL语言&quot;&gt;&lt;a href=&quot;#PL-SQL-过程化SQL语言&quot; class=&quot;headerlink&quot; title=&quot;PL_SQL(过程化SQL语言)&quot;&gt;&lt;/a&gt;PL_SQL(过程化SQL语言)&lt;/h1&gt;&lt;h3 id=&quot;38-在客户端输出helloworld&quot;&gt;&lt;a href=&quot;#38-在客户端输出helloworld&quot; class=&quot;headerlink&quot; title=&quot;38. 在客户端输出helloworld&quot;&gt;&lt;/a&gt;38. 在客户端输出helloworld&lt;/h3&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; serveroutput &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt;;//默认是off，设成on是让Oracle可以在客户端输出数据 &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;begin&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       dbms_output.put_line(&lt;span class=&quot;string&quot;&gt;&#39;helloworld&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       /&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;----------------pl/sql变量的赋值与输出----&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;declare&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;              v_name varchar2(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;);//声明变量v_name变量的声明以v_开头&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;begin&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;              v_name:= &lt;span class=&quot;string&quot;&gt;&#39;myname&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;              dbms_output.put_line(v_name);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       /&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Oracle" scheme="https://okcthouder.github.io/categories/Oracle/"/>
    
    
      <category term="Oracle sql" scheme="https://okcthouder.github.io/tags/Oracle-sql/"/>
    
  </entry>
  
  <entry>
    <title>Oracle学习笔记(四)</title>
    <link href="https://okcthouder.github.io/2017/07/18/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9B%9B/"/>
    <id>https://okcthouder.github.io/2017/07/18/Oracle学习笔记-四/</id>
    <published>2017-07-18T04:00:00.000Z</published>
    <updated>2017-07-23T08:34:39.991Z</updated>
    
    <content type="html"><![CDATA[<h3 id="24-——-创建新用户——–"><a href="#24-——-创建新用户——–" class="headerlink" title="24.——-创建新用户——–"></a>24.——-创建新用户——–</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">1、<span class="keyword">backup</span> scott//备份</div><div class="line"></div><div class="line">       <span class="keyword">exp</span>//导出</div><div class="line"></div><div class="line"><span class="number">2</span>、<span class="keyword">create</span> <span class="keyword">user</span></div><div class="line"></div><div class="line">       createuser guohailong <span class="keyword">identified</span>(认证) <span class="keyword">by</span> guohailong  <span class="keyword">default</span> <span class="keyword">table</span> <span class="keyword">space</span> <span class="keyword">users</span> <span class="keyword">quota</span>(配额) <span class="number">10</span>M <span class="keyword">on</span> <span class="keyword">users</span></div><div class="line"></div><div class="line">       <span class="keyword">grant</span> <span class="keyword">create</span> <span class="keyword">session</span>(给它登录到服务器的权限),<span class="keyword">create</span> <span class="keyword">table</span>, <span class="keyword">create</span> <span class="keyword">view</span> <span class="keyword">to</span> guohailong</div><div class="line"></div><div class="line"><span class="number">3</span>、<span class="keyword">import</span> <span class="keyword">data</span></div><div class="line"></div><div class="line">       Imp</div></pre></td></tr></table></figure>
  <a id="more"></a>
<h3 id="25-——-取消操作——–"><a href="#25-——-取消操作——–" class="headerlink" title="25. ——-取消操作——–"></a>25. ——-取消操作——–</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">rollback</span></div><div class="line"></div><div class="line"><span class="comment">-----------事务确认语句--------</span></div><div class="line"></div><div class="line">       <span class="keyword">commit</span>;//此时再执行<span class="keyword">rollback</span>无效</div><div class="line"></div><div class="line">当正常断开连接的时候例如<span class="keyword">exit</span>,事务自动提交。  当非正常断开连接，例如直接关闭dos窗口或关机，事务自动提交 </div><div class="line"></div><div class="line"><span class="comment">-----表的备份</span></div><div class="line"></div><div class="line">      <span class="keyword">create</span> <span class="keyword">table</span> dept2 <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> dept;</div><div class="line"></div><div class="line"><span class="comment">-----插入数据</span></div><div class="line"></div><div class="line">       <span class="keyword">insert</span> <span class="keyword">into</span> dept2 <span class="keyword">values</span>(<span class="number">50</span>,<span class="string">'game'</span>,<span class="string">'beijing'</span>);</div><div class="line"></div><div class="line">     <span class="comment">----只对某个字段插入数据</span></div><div class="line"></div><div class="line">       <span class="keyword">insert</span> <span class="keyword">into</span> dept2(deptno,dname) <span class="keyword">values</span>(<span class="number">60</span>,<span class="string">'game2'</span>);</div><div class="line"></div><div class="line"><span class="comment">-----将一个表中的数据完全插入另一个表中（表结构必须一样）</span></div><div class="line"></div><div class="line">       <span class="keyword">insert</span> <span class="keyword">into</span> dept2 <span class="keyword">select</span> * <span class="keyword">from</span> dept;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">-----求前五名员工的编号和名称（使用伪字段rownum 只能使用 &lt; 或 = 要使用 &gt; 必须使用子查询）</span></div><div class="line"></div><div class="line">       <span class="keyword">select</span> empno,ename <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">rownum</span> &lt;= <span class="number">5</span>;</div><div class="line"></div><div class="line"><span class="comment">----求10名雇员以后的雇员名称--------</span></div><div class="line"></div><div class="line">       <span class="keyword">select</span> ename <span class="keyword">from</span> (<span class="keyword">select</span> <span class="keyword">rownum</span> r,ename <span class="keyword">from</span> emp) <span class="keyword">where</span> r &gt; <span class="number">10</span>;</div><div class="line"></div><div class="line"><span class="comment">----求薪水最高的前5个人的薪水和名字---------</span></div><div class="line"></div><div class="line">       <span class="keyword">select</span> ename, sal <span class="keyword">from</span> (<span class="keyword">select</span> ename, sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>) <span class="keyword">where</span> <span class="keyword">rownum</span>&lt;=<span class="number">5</span>;      </div><div class="line"></div><div class="line"><span class="comment">----求按薪水倒序排列后的第6名到第10名的员工的名字和薪水--------</span></div><div class="line"></div><div class="line">       selectename, sal from</div><div class="line"></div><div class="line">          (<span class="keyword">select</span> ename, sal, <span class="keyword">rownum</span> r <span class="keyword">from</span></div><div class="line"></div><div class="line">              (<span class="keyword">select</span> ename, sal <span class="keyword">from</span> emp orderby sal <span class="keyword">desc</span>)</div><div class="line"></div><div class="line">          )</div><div class="line"></div><div class="line">       <span class="keyword">where</span> r&gt;=<span class="number">6</span> <span class="keyword">and</span> r&lt;=<span class="number">10</span></div></pre></td></tr></table></figure>
<h3 id="26-——-面试题——–"><a href="#26-——-面试题——–" class="headerlink" title="26. ——-面试题——–"></a>26. ——-面试题——–</h3><p>​      有3个表S，C，SC</p>
<p>​       S（SNO，SNAME）代表（学号，姓名） </p>
<p>​       C（CNO，CNAME，CTEACHER）代表（课号，课名，教师） </p>
<p>​       SC（SNO，CNO，SCGRADE）代表（学号，课号成绩） </p>
<p>​       问题： </p>
<p>​       1，找出没选过“黎明”老师的所有学生姓名。 </p>
<p>​       2，列出2门以上（含2门）不及格学生姓名及平均成绩。 </p>
<p>​       3，即学过1号课程有学过2号课所有学生的姓名。</p>
<p>​       答案：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">1、</div><div class="line"></div><div class="line">    <span class="keyword">select</span> sname <span class="keyword">from</span> s <span class="keyword">join</span> sc <span class="keyword">on</span>(s.sno =sc.sno) <span class="keyword">join</span> c <span class="keyword">on</span> (sc.cno = c.cno) <span class="keyword">where</span> cteacher &lt;&gt; <span class="string">'黎明'</span>;</div><div class="line"></div><div class="line">2、</div><div class="line">    <span class="keyword">select</span> sname <span class="keyword">where</span> sno <span class="keyword">in</span> (<span class="keyword">select</span> sno <span class="keyword">from</span> sc <span class="keyword">where</span> scgrade &lt; <span class="number">60</span> <span class="keyword">group</span> <span class="keyword">by</span> sno <span class="keyword">having</span> <span class="keyword">count</span>(*) &gt;=<span class="number">2</span>);</div><div class="line"></div><div class="line">3、</div><div class="line">    <span class="keyword">select</span> sname <span class="keyword">from</span> s <span class="keyword">where</span> sno <span class="keyword">in</span> (<span class="keyword">select</span> sno, <span class="keyword">from</span> sc <span class="keyword">where</span> cno=<span class="number">1</span> <span class="keyword">and</span> cno <span class="keyword">in</span></div><div class="line"></div><div class="line">                                          (<span class="keyword">select</span> <span class="keyword">distinct</span> sno <span class="keyword">from</span> sc <span class="keyword">where</span> cno = <span class="number">2</span>);</div><div class="line">                                 )</div></pre></td></tr></table></figure>
<h3 id="27-——–创建表———–"><a href="#27-——–创建表———–" class="headerlink" title="27. ——–创建表———–"></a>27. ——–创建表———–</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu</div><div class="line"></div><div class="line">(</div><div class="line"></div><div class="line"><span class="keyword">id</span> <span class="built_in">number</span>(<span class="number">6</span>),</div><div class="line"></div><div class="line"><span class="keyword">name</span> varchar2(<span class="number">20</span>) <span class="keyword">constraint</span> stu_name_mmnot <span class="literal">null</span>,</div><div class="line"></div><div class="line">sex <span class="built_in">number</span>(<span class="number">1</span>),</div><div class="line"></div><div class="line">age <span class="built_in">number</span>(<span class="number">3</span>),</div><div class="line"></div><div class="line">sdate <span class="built_in">date</span>,</div><div class="line"></div><div class="line">grade <span class="built_in">number</span>(<span class="number">2</span>) <span class="keyword">default</span> <span class="number">1</span>,</div><div class="line"></div><div class="line"><span class="keyword">class</span> <span class="built_in">number</span>(<span class="number">4</span>),</div><div class="line"></div><div class="line">email varchar2(<span class="number">50</span>) <span class="keyword">unique</span></div><div class="line"></div><div class="line"> );</div></pre></td></tr></table></figure>
<h3 id="28-五种约束条件：非空约束、唯一约束、主键约束、外键约束、检查约束（check）"><a href="#28-五种约束条件：非空约束、唯一约束、主键约束、外键约束、检查约束（check）" class="headerlink" title="28. 五种约束条件：非空约束、唯一约束、主键约束、外键约束、检查约束（check）"></a>28. 五种约束条件：非空约束、唯一约束、主键约束、外键约束、检查约束（check）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="comment">--------------给name字段加入 非空 **约束**，并给约束一个名字，若不取，系统默认取一个-------------</span></div><div class="line"></div><div class="line">      <span class="keyword">create</span> <span class="keyword">table</span> stu</div><div class="line"></div><div class="line">      (</div><div class="line"></div><div class="line">      <span class="keyword">id</span> <span class="built_in">number</span>(<span class="number">6</span>),</div><div class="line"></div><div class="line">      <span class="keyword">name</span> varchar2(<span class="number">20</span>) <span class="keyword">constraint</span> stu_name_mm <span class="keyword">not</span> <span class="literal">null</span>,</div><div class="line"></div><div class="line">      sex <span class="built_in">number</span>(<span class="number">1</span>),</div><div class="line"></div><div class="line">      age <span class="built_in">number</span>(<span class="number">3</span>),</div><div class="line"></div><div class="line">      sdate <span class="built_in">date</span>,</div><div class="line"></div><div class="line">      grade <span class="built_in">number</span>(<span class="number">2</span>) <span class="keyword">default</span> <span class="number">1</span>,</div><div class="line"></div><div class="line">      <span class="keyword">class</span> <span class="built_in">number</span>(<span class="number">4</span>),</div><div class="line"></div><div class="line">      email varchar2(<span class="number">50</span>)</div><div class="line"></div><div class="line">       );</div><div class="line"></div><div class="line"><span class="comment">--------------给nameemail字段加上唯一约束两个 null值 不为重复-------------</span></div><div class="line"></div><div class="line">      <span class="keyword">create</span> <span class="keyword">table</span> stu</div><div class="line"></div><div class="line">      (</div><div class="line"></div><div class="line">      <span class="keyword">id</span> <span class="built_in">number</span>(<span class="number">6</span>),</div><div class="line"></div><div class="line">      <span class="keyword">name</span> varchar2(<span class="number">20</span>) <span class="keyword">constraint</span> stu_name_mmnot <span class="literal">null</span>,</div><div class="line"></div><div class="line">      sex <span class="built_in">number</span>(<span class="number">1</span>),</div><div class="line"></div><div class="line">      age <span class="built_in">number</span>(<span class="number">3</span>),</div><div class="line"></div><div class="line">      sdate <span class="built_in">date</span>,</div><div class="line"></div><div class="line">      grade <span class="built_in">number</span>(<span class="number">2</span>) <span class="keyword">default</span> <span class="number">1</span>,</div><div class="line"></div><div class="line">      <span class="keyword">class</span> <span class="built_in">number</span>(<span class="number">4</span>),</div><div class="line"></div><div class="line">      email varchar2(<span class="number">50</span>) <span class="keyword">unique</span></div><div class="line"></div><div class="line">       );</div><div class="line"></div><div class="line"><span class="comment">--------------两个字段的组合不能重复 约束：表级约束-------------</span></div><div class="line"></div><div class="line">      <span class="keyword">create</span> <span class="keyword">table</span> stu</div><div class="line"></div><div class="line">      (</div><div class="line"></div><div class="line">      <span class="keyword">id</span> <span class="built_in">number</span>(<span class="number">6</span>),</div><div class="line"></div><div class="line">      <span class="keyword">name</span> varchar2(<span class="number">20</span>) <span class="keyword">constraint</span> stu_name_mmnot <span class="literal">null</span>,</div><div class="line"></div><div class="line">      sex <span class="built_in">number</span>(<span class="number">1</span>),</div><div class="line"></div><div class="line">      age <span class="built_in">number</span>(<span class="number">3</span>),</div><div class="line"></div><div class="line">      sdate <span class="built_in">date</span>,</div><div class="line"></div><div class="line">      grade <span class="built_in">number</span>(<span class="number">2</span>) <span class="keyword">default</span> <span class="number">1</span>,</div><div class="line"></div><div class="line">      <span class="keyword">class</span> <span class="built_in">number</span>(<span class="number">4</span>),</div><div class="line"></div><div class="line">      email varchar2(<span class="number">50</span>)，</div><div class="line"></div><div class="line">       <span class="keyword">constraint</span> stu_name_email_uni <span class="keyword">unique</span>(email,<span class="keyword">name</span>)</div><div class="line"></div><div class="line">       );</div></pre></td></tr></table></figure>
<h3 id="29-——-主键约束——–"><a href="#29-——-主键约束——–" class="headerlink" title="29. ——-主键约束——–"></a>29. ——-主键约束——–</h3><p>​     </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu</div><div class="line"></div><div class="line">     (</div><div class="line"></div><div class="line">     <span class="keyword">id</span> <span class="built_in">number</span>(<span class="number">6</span>),</div><div class="line"></div><div class="line">     <span class="keyword">name</span> varchar2(<span class="number">20</span>) <span class="keyword">constraint</span> stu_name_mmnot <span class="literal">null</span>,</div><div class="line"></div><div class="line">     sex <span class="built_in">number</span>(<span class="number">1</span>),</div><div class="line"></div><div class="line">     age <span class="built_in">number</span>(<span class="number">3</span>),</div><div class="line"></div><div class="line">     sdate <span class="built_in">date</span>,</div><div class="line"></div><div class="line">     grade <span class="built_in">number</span>(<span class="number">2</span>) <span class="keyword">default</span> <span class="number">1</span>,</div><div class="line"></div><div class="line">     <span class="keyword">class</span> <span class="built_in">number</span>(<span class="number">4</span>),</div><div class="line"></div><div class="line">     email varchar2(<span class="number">50</span>),</div><div class="line"></div><div class="line">      <span class="keyword">constraint</span> stu_id_pk primary <span class="keyword">key</span> (<span class="keyword">id</span>),</div><div class="line"></div><div class="line">      constraintstu_name_email_uni <span class="keyword">unique</span>(email, <span class="keyword">name</span>)</div><div class="line"></div><div class="line">      );</div></pre></td></tr></table></figure>
<h3 id="30-—外键约束-被参考字段必须是主键—"><a href="#30-—外键约束-被参考字段必须是主键—" class="headerlink" title="30.—外键约束  被参考字段必须是主键—"></a>30.—外键约束  被参考字段必须是主键—</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu</div><div class="line"></div><div class="line">(</div><div class="line"></div><div class="line"><span class="keyword">id</span> <span class="built_in">number</span>(<span class="number">6</span>),</div><div class="line"></div><div class="line"><span class="keyword">name</span> varchar2(<span class="number">20</span>) <span class="keyword">constraint</span> stu_name_mmnot <span class="literal">null</span>,</div><div class="line"></div><div class="line">sex <span class="built_in">number</span>(<span class="number">1</span>),</div><div class="line"></div><div class="line">age <span class="built_in">number</span>(<span class="number">3</span>),</div><div class="line"></div><div class="line">sdate <span class="built_in">date</span>,</div><div class="line"></div><div class="line">grade <span class="built_in">number</span>(<span class="number">2</span>) <span class="keyword">default</span> <span class="number">1</span>,</div><div class="line"></div><div class="line"><span class="keyword">class</span> <span class="built_in">number</span>(<span class="number">4</span>) <span class="keyword">references</span> <span class="keyword">class</span>(<span class="keyword">id</span>),</div><div class="line"></div><div class="line">email varchar2(<span class="number">50</span>),</div><div class="line"></div><div class="line"> <span class="keyword">constraint</span> stu_class_fk foreign <span class="keyword">key</span> (<span class="keyword">class</span>) <span class="keyword">references</span> <span class="keyword">class</span>(<span class="keyword">id</span>),</div><div class="line"></div><div class="line"> <span class="keyword">constraint</span> stu_id_pk primary <span class="keyword">key</span> (<span class="keyword">id</span>),</div><div class="line"></div><div class="line"> <span class="keyword">constraint</span> stu_name_email_uni <span class="keyword">unique</span>(email, <span class="keyword">name</span>)</div><div class="line"></div><div class="line"> );</div><div class="line"></div><div class="line"> 红色为字段约束的写法，蓝色为表级约束的写法</div><div class="line"></div><div class="line"> createtable class </div><div class="line"></div><div class="line"> (</div><div class="line"></div><div class="line"> idnumber(4) primary key,</div><div class="line"></div><div class="line"> namevarchar2(20) not null</div><div class="line"></div><div class="line"> );</div></pre></td></tr></table></figure>
<h3 id="31-修改表结构"><a href="#31-修改表结构" class="headerlink" title="31. 修改表结构"></a>31. 修改表结构</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">---------------添加字段--------------------------</span></div><div class="line"></div><div class="line">       altertable stu add(addr varchar2(29));</div><div class="line"></div><div class="line"><span class="comment">---------------删除字段--------------------------</span></div><div class="line"></div><div class="line">       altertable stu <span class="keyword">drop</span> (addr);</div><div class="line"></div><div class="line"><span class="comment">---------------修改表字段的长度------------------</span></div><div class="line"></div><div class="line">       altertable  stu modify (addr varchar2(50));//更改后的长度必须要能容纳原先的数据</div><div class="line"></div><div class="line"><span class="comment">----------------删除约束条件----------------</span></div><div class="line"></div><div class="line">       altertable stu <span class="keyword">drop</span> <span class="keyword">constraint</span>  约束名</div><div class="line"></div><div class="line"><span class="comment">-----------修改表结构添加约束条件---------------</span></div><div class="line"></div><div class="line">       altertable stu <span class="keyword">add</span> <span class="keyword">constraint</span> stu_class_fk foreign <span class="keyword">key</span> (<span class="keyword">class</span>) <span class="keyword">references</span> <span class="keyword">class</span>(<span class="keyword">id</span>);</div></pre></td></tr></table></figure>
<h3 id="32-数据字典表（有user-tables、user-views、user-constraints等等）"><a href="#32-数据字典表（有user-tables、user-views、user-constraints等等）" class="headerlink" title="32. 数据字典表（有user_tables、user_views、user_constraints等等）"></a>32. 数据字典表（有user_tables、user_views、user_constraints等等）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">---------------查看当前用户下面所有的表、视图、约束-----数据字典表user_tables---</span></div><div class="line"></div><div class="line">       <span class="keyword">select</span> table_name <span class="keyword">from</span> user_tables;</div><div class="line"></div><div class="line">       <span class="keyword">select</span> view_name <span class="keyword">from</span> user_views;</div><div class="line"></div><div class="line">       <span class="keyword">select</span> constraint_name <span class="keyword">from</span> user_constraints;</div><div class="line"></div><div class="line"> </div><div class="line">       存储数据字典表的信息的表：dictionary;</div><div class="line"></div><div class="line">        //该表共有两个字段 table_name comments</div><div class="line"></div><div class="line">        //table_name主要存放数据字典表的名字</div><div class="line"></div><div class="line">        //comments主要是对这张数据字典表的描述</div></pre></td></tr></table></figure>
<p>​        </p>
<h3 id="33-索引-能优化查询效率"><a href="#33-索引-能优化查询效率" class="headerlink" title="33. 索引(能优化查询效率)"></a>33. 索引(能优化查询效率)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_stu_email <span class="keyword">on</span> stu (email);// 在stu这张表的email字段上建立一个索引：idx_stu_email</div><div class="line"></div><div class="line"><span class="comment">---------- 删除索引 ------------------</span></div><div class="line"></div><div class="line">       <span class="keyword">drop</span> <span class="keyword">index</span> index_stu_email;</div><div class="line"></div><div class="line"><span class="comment">---------查看所有的索引----------------</span></div><div class="line"></div><div class="line">       <span class="keyword">select</span> index_name <span class="keyword">from</span> user_indexes;</div><div class="line"></div><div class="line"><span class="comment">---------创建视图-------------------</span></div><div class="line"></div><div class="line">       <span class="keyword">create</span> <span class="keyword">view</span> v$stu <span class="keyword">as</span> <span class="keyword">select</span> <span class="keyword">id</span>,<span class="keyword">name</span>,age <span class="keyword">from</span> stu;</div></pre></td></tr></table></figure>
<p>​       视图的作用: 简化查询，保护我们的一些隐私数据，通过视图也可以用来更新数据，但是我们一般不这么用 </p>
<p>缺点：要对视图进行维护</p>
<h3 id="34-创建序列（sequence，oracle特有的东西，一般用来做主键）"><a href="#34-创建序列（sequence，oracle特有的东西，一般用来做主键）" class="headerlink" title="34.创建序列（sequence，oracle特有的东西，一般用来做主键）"></a>34.创建序列（sequence，oracle特有的东西，一般用来做主键）</h3><p>​      </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> seq;//创建序列</div><div class="line"></div><div class="line">      <span class="keyword">select</span> seq.nextval <span class="keyword">from</span> dual;// 查看seq序列的下一个值</div><div class="line"></div><div class="line">      <span class="keyword">drop</span> <span class="keyword">sequence</span> seq;//删除序列</div><div class="line"></div><div class="line">      </div><div class="line"></div><div class="line">      <span class="keyword">create</span> <span class="keyword">table</span> article ( <span class="keyword">id</span> <span class="built_in">number</span>, title varchar2(<span class="number">1024</span>),cont <span class="keyword">long</span>);</div><div class="line"></div><div class="line">      <span class="keyword">create</span> <span class="keyword">sequence</span> seq;</div><div class="line"></div><div class="line">      <span class="keyword">insert</span> <span class="keyword">into</span> article (<span class="keyword">id</span>,title,cont) <span class="keyword">values</span>(seq.nextval , ‘a’, ‘b’);</div></pre></td></tr></table></figure>
<h3 id="35-数据库的三范式"><a href="#35-数据库的三范式" class="headerlink" title="35. 数据库的三范式"></a>35. 数据库的三范式</h3><p>​       （1）要有主键<strong>，</strong>列不可分</p>
<p>​       （2）<strong>不能存在部分依赖</strong>：当有多个字段联合起来作为主键的时候，不是主键的字段不能部分依赖于主键中的某个字段</p>
<p>​       （3）不能存在传递依赖</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;24-——-创建新用户——–&quot;&gt;&lt;a href=&quot;#24-——-创建新用户——–&quot; class=&quot;headerlink&quot; title=&quot;24.——-创建新用户——–&quot;&gt;&lt;/a&gt;24.——-创建新用户——–&lt;/h3&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1、&lt;span class=&quot;keyword&quot;&gt;backup&lt;/span&gt; scott//备份&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;exp&lt;/span&gt;//导出&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;、&lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;user&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       createuser guohailong &lt;span class=&quot;keyword&quot;&gt;identified&lt;/span&gt;(认证) &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; guohailong  &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;space&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;users&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;quota&lt;/span&gt;(配额) &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;M &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;users&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;grant&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;session&lt;/span&gt;(给它登录到服务器的权限),&lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; guohailong&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;、&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;data&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       Imp&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Oracle" scheme="https://okcthouder.github.io/categories/Oracle/"/>
    
    
      <category term="Oracle sql" scheme="https://okcthouder.github.io/tags/Oracle-sql/"/>
    
  </entry>
  
  <entry>
    <title>Oracle学习笔记(三)</title>
    <link href="https://okcthouder.github.io/2017/07/18/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%89/"/>
    <id>https://okcthouder.github.io/2017/07/18/Oracle学习笔记-三/</id>
    <published>2017-07-18T03:59:00.000Z</published>
    <updated>2017-07-23T08:37:37.568Z</updated>
    
    <content type="html"><![CDATA[<h3 id="12-SQL1999-table-connections"><a href="#12-SQL1999-table-connections" class="headerlink" title="12. SQL1999_table_connections"></a>12. SQL1999_table_connections</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> ename, dname,grade <span class="keyword">from</span> emp e,deptd, salgrade s</div><div class="line"><span class="keyword">where</span> e.deptno = d.deptno <span class="keyword">and</span> e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal <span class="keyword">and</span> </div><div class="line">job &lt;&gt; <span class="string">'CLERK'</span></div></pre></td></tr></table></figure>
<p>​           有没有办法把过滤条件和连接条件分开来? 出于这样考虑,Sql1999标准推出来了.有许多人用的还是</p>
<p>旧的语法,所以得看懂这种语句.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> ename,dname <span class="keyword">from</span> emp,dept;(旧标准).</div><div class="line"></div><div class="line"><span class="keyword">select</span> ename,dname <span class="keyword">from</span> emp** <span class="keyword">cross</span> <span class="keyword">join</span>** dept;(1999标准)</div><div class="line"></div><div class="line"><span class="keyword">select</span> ename,dname <span class="keyword">from</span> emp,dept <span class="keyword">where</span> emp.deptno=dept.deptno (旧)</div><div class="line"></div><div class="line"><span class="keyword">select</span> ename,dname <span class="keyword">from</span> emp <span class="keyword">join</span> dept <span class="keyword">on</span>(emp.deptno = dept.deptno); 1999标准.没有Where语句.</div><div class="line"></div><div class="line"><span class="keyword">select</span> ename,dname <span class="keyword">from</span> emp <span class="keyword">join</span> dept <span class="keyword">using</span>(deptno);等同上句,但不推荐使用.</div><div class="line"></div><div class="line"><span class="keyword">select</span> ename,grade <span class="keyword">from</span> emp e <span class="keyword">join</span> salgrade s <span class="keyword">on</span>(e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal);</div></pre></td></tr></table></figure>
<p>​    </p>
   <a id="more"></a>
<p>  join 连接语句, on过滤条件。连接，条件一眼分开。如果用Where语句较长时，连接语句和过滤语句混在一起。<br>​      三张表连接：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">slect ename, dname, grade from</div><div class="line"></div><div class="line">emp e join dept d on(e.deptno=d.deptno)</div><div class="line"></div><div class="line">join salgrade s on(e.sal between s.losal and s.hisal)</div><div class="line"></div><div class="line">where ename not like '_A%';</div></pre></td></tr></table></figure>
<p>​      把每张表连接 条件不混在一起，然后数据过滤条件全部区分开来。读起来更清晰，更容易懂一点。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">select</span> e1.ename,e2.ename <span class="keyword">from</span> emp e1 <span class="keyword">join</span> emp e2</div><div class="line"></div><div class="line"><span class="keyword">on</span>(e1.mgr = e2.emptno);</div></pre></td></tr></table></figure>
<p>​      左外连接：会把左边这张表多余数据显示出来。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">select</span> e1.ename,e2.ename <span class="keyword">from</span> emp e1 <span class="keyword">left</span> <span class="keyword">join</span></div><div class="line"></div><div class="line">emp e2 <span class="keyword">on</span>(e1.mgr =e2.empno);left 后可加outer</div></pre></td></tr></table></figure>
<p>​      右外连接：把右边这张表多余数据显示出来。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">select</span> ename,dname <span class="keyword">from</span> emp e <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> dept d</div><div class="line"></div><div class="line"><span class="keyword">on</span>(e.deptno =d.deptno); outer可以取掉。</div></pre></td></tr></table></figure>
<p>​      全外连接： 即把左边多余数据，也把右边多余数据拿出来， </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">select</span> ename,dname <span class="keyword">from</span> emp e <span class="keyword">full</span> <span class="keyword">join</span> dept d</div><div class="line"></div><div class="line"><span class="keyword">on</span>(e.deptno =d.deptno);</div></pre></td></tr></table></figure>
<p>PS：所谓的“外”连接，即把多余的数据显示出来。Outer关键字可以省略。</p>
<h3 id="13-求部门中哪些人的薪水最高"><a href="#13-求部门中哪些人的薪水最高" class="headerlink" title="13. 求部门中哪些人的薪水最高"></a>13. 求部门中哪些人的薪水最高</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> ename, sal <span class="keyword">from</span> emp</div><div class="line"><span class="keyword">join</span> (<span class="keyword">select</span> <span class="keyword">max</span>(sal) max_sal, deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) t</div><div class="line"><span class="keyword">on</span> (emp.sal = t.max_sal <span class="keyword">and</span> emp.deptno = t.deptno)</div></pre></td></tr></table></figure>
<h3 id="14-求部门平均薪水的等级"><a href="#14-求部门平均薪水的等级" class="headerlink" title="14. 求部门平均薪水的等级"></a>14. 求部门平均薪水的等级</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> deptno,avg_sal,grade <span class="keyword">from</span></div><div class="line">       (<span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) avg_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)t</div><div class="line">       <span class="keyword">join</span> salgrade s <span class="keyword">on</span>(t.avg_sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal)</div></pre></td></tr></table></figure>
<h3 id="15-求部门平均的薪水的平均等级"><a href="#15-求部门平均的薪水的平均等级" class="headerlink" title="15. 求部门平均的薪水的平均等级"></a>15. 求部门平均的薪水的平均等级</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> deptno,<span class="keyword">avg</span>(grade) <span class="keyword">from</span> </div><div class="line">(<span class="keyword">select</span> deptno,ename, grade <span class="keyword">from</span> emp <span class="keyword">join</span> salgrade s <span class="keyword">on</span>(emp.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal)) t</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno</div></pre></td></tr></table></figure>
<h3 id="16-哪些人是经理"><a href="#16-哪些人是经理" class="headerlink" title="16. 哪些人是经理"></a>16. 哪些人是经理</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="keyword">in</span>(<span class="keyword">select</span> mgr <span class="keyword">from</span> emp);</div><div class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="keyword">in</span>(<span class="keyword">select</span> <span class="keyword">distinct</span> mgr <span class="keyword">from</span> emp);</div></pre></td></tr></table></figure>
<h3 id="17-不准用组函数，求薪水的最高值（面试题）"><a href="#17-不准用组函数，求薪水的最高值（面试题）" class="headerlink" title="17.不准用组函数，求薪水的最高值（面试题）"></a>17.不准用组函数，求薪水的最高值（面试题）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">not</span> <span class="keyword">in</span>(</div><div class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> e1.sal <span class="keyword">from</span> emp e1 <span class="keyword">join</span> emp e2 <span class="keyword">on</span> (e1.sal&lt;e2.sal));</div></pre></td></tr></table></figure>
<h3 id="18-平均薪水最高的部门编号"><a href="#18-平均薪水最高的部门编号" class="headerlink" title="18.平均薪水最高的部门编号"></a>18.平均薪水最高的部门编号</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> deptno,avg_sal <span class="keyword">from</span></div><div class="line">(<span class="keyword">select</span> <span class="keyword">avg</span>(sal)avg_sal,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)</div><div class="line"><span class="keyword">where</span> avg_sal=</div><div class="line">(<span class="keyword">select</span> <span class="keyword">max</span>(avg_sal)<span class="keyword">from</span> </div><div class="line">(<span class="keyword">select</span> <span class="keyword">avg</span>(sal) avg_sal,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="19-平均薪水最高的部门名称"><a href="#19-平均薪水最高的部门名称" class="headerlink" title="19.平均薪水最高的部门名称"></a>19.平均薪水最高的部门名称</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">select</span> dname <span class="keyword">from</span> dept <span class="keyword">where</span> deptno=</div><div class="line">( </div><div class="line">  <span class="keyword">select</span> deptno <span class="keyword">from</span></div><div class="line">  (<span class="keyword">select</span> <span class="keyword">avg</span>(sal)avg_sal,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)</div><div class="line">  <span class="keyword">where</span> avg_sal=</div><div class="line">  (<span class="keyword">select</span> <span class="keyword">max</span>(avg_sal)<span class="keyword">from</span> </div><div class="line">  (<span class="keyword">select</span> <span class="keyword">avg</span>(sal) avg_sal,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)</div><div class="line">  )</div><div class="line"> )</div></pre></td></tr></table></figure>
<h3 id="20-求平均薪水的等级最低的部门的部门名称"><a href="#20-求平均薪水的等级最低的部门的部门名称" class="headerlink" title="20.求平均薪水的等级最低的部门的部门名称"></a>20.求平均薪水的等级最低的部门的部门名称</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">--组函数嵌套</span></div><div class="line">  <span class="comment">--如：平均薪水最高的部门编号，可以E.更简单的方法如下：</span></div><div class="line">  <span class="keyword">select</span> deptno,avg_sal <span class="keyword">from</span> </div><div class="line">  (<span class="keyword">select</span> <span class="keyword">avg</span>(sal) avg_sal,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)</div><div class="line">  <span class="keyword">where</span> avg_sal =</div><div class="line">  (<span class="keyword">select</span> <span class="keyword">max</span>(<span class="keyword">avg</span>(sal)) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)</div><div class="line">      组函数最多嵌套两层</div><div class="line">      </div><div class="line">     <span class="comment">-- 分析：</span></div><div class="line">     <span class="comment">-- 首先求</span></div><div class="line">     <span class="comment">--1.平均薪水： </span></div><div class="line">	<span class="keyword">select</span> <span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</div><div class="line">     <span class="comment">-- 2.平均薪水等级：  把平均薪水当做一张表，需要和另外一张表连接salgrade</span></div><div class="line">      <span class="keyword">select</span>  deptno,grade,avg_sal <span class="keyword">from</span> </div><div class="line">        ( <span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) avg_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) t</div><div class="line">      <span class="keyword">join</span> salgrade s <span class="keyword">on</span>(t.avg_sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal)</div><div class="line">      </div><div class="line"> <span class="comment">--  上面结果又可当成一张表。</span></div><div class="line">      </div><div class="line"> <span class="comment">--   DEPTNO    GRADE    AVG_SAL</span></div><div class="line">    <span class="comment">--------  -------  ----------</span></div><div class="line"> <span class="comment">--   30           3   1566.66667</span></div><div class="line"> <span class="comment">--   20           4   2175</span></div><div class="line"> <span class="comment">--   10           4   2916.66667</span></div><div class="line"></div><div class="line"> <span class="comment">--   3.求上表平均等级最低值</span></div><div class="line">      </div><div class="line">      <span class="keyword">select</span> <span class="keyword">min</span>(grade) <span class="keyword">from</span></div><div class="line">      (</div><div class="line">        <span class="keyword">select</span> deptno,grade,avg_sal <span class="keyword">from</span></div><div class="line">         (<span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) avg_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)t</div><div class="line">        <span class="keyword">join</span> salgrade s <span class="keyword">on</span>(t.avg_sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisa)</div><div class="line">       )</div><div class="line"></div><div class="line"> <span class="comment">--   4.把最低值对应的2结果的那张表的对应那张表的deptno, 然后把2对应的表和另外一张表做连接。</span></div><div class="line">        </div><div class="line">        <span class="keyword">select</span> dname ,deptno,grade,avg_sal <span class="keyword">from</span></div><div class="line">          (</div><div class="line">	      <span class="keyword">select</span> deptno,grade,avg_sal <span class="keyword">from</span></div><div class="line">            (<span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) avg_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)t</div><div class="line">           <span class="keyword">join</span> salgrade s <span class="keyword">on</span>(t.avg_sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal)</div><div class="line">           ) t1</div><div class="line">          <span class="keyword">join</span> dept <span class="keyword">on</span> (t1.deptno = dept.deptno)</div><div class="line">          <span class="keyword">where</span> t1.grade =</div><div class="line">          ( </div><div class="line">            <span class="keyword">select</span> deptno,grade,avg_sal <span class="keyword">from</span></div><div class="line">             (<span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) avg_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) t</div><div class="line">              <span class="keyword">join</span> salgrade s <span class="keyword">on</span>(t.avg_sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal)</div><div class="line">             )</div><div class="line">          )</div><div class="line"><span class="comment">--       结果如下：</span></div><div class="line">       </div><div class="line"><span class="comment">--      DNAME    DEPTNO     GRADE    AVG_SAL</span></div><div class="line"><span class="comment">--    --------  -------  --------   --------</span></div><div class="line"><span class="comment">--      SALES        30        3    1566.6667</span></div></pre></td></tr></table></figure>
<h3 id="21-视图（视图就是一张表，一个字查询）"><a href="#21-视图（视图就是一张表，一个字查询）" class="headerlink" title="21. 视图（视图就是一张表，一个字查询）"></a>21. 视图（视图就是一张表，一个字查询）</h3><p>【</p>
<p>​       默认scott账户没有创建视图的权限，可通过如下语句授权：<br>​       首先登陆超级管理员：conn sys/用户密码 as sysdba;<br>​       授权：grant create table,create view to scott;<br>​       再以scott账户登陆：conn scott/tiger</p>
<p>】 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 20中语句有重复，可以用视图来简化。</span></div><div class="line">   conn sys/bjsxt as sysdba;</div><div class="line">   <span class="keyword">grant</span> <span class="keyword">create</span> <span class="keyword">table</span>,<span class="keyword">create</span> <span class="keyword">view</span> <span class="keyword">to</span> scott;</div><div class="line">   conn scott/tiger</div><div class="line"><span class="comment">-- 创建视图：</span></div><div class="line">   <span class="keyword">create</span> <span class="keyword">view</span> v$_dept_avg-sal_info <span class="keyword">as</span></div><div class="line">   <span class="keyword">select</span> deptno,grade,avg_sal <span class="keyword">from</span></div><div class="line">    ( <span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) avg_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)t</div><div class="line">   <span class="keyword">join</span> salgrade s <span class="keyword">on</span> <span class="number">9</span>t.avg_sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal)</div><div class="line">  </div><div class="line"><span class="comment">-- 然后 </span></div><div class="line">   <span class="keyword">select</span> * <span class="keyword">from</span> v$_dept_avg-sal_info</div><div class="line">   </div><div class="line"><span class="comment">-- 结果如下：</span></div><div class="line"><span class="comment">--   DEPTNO      GRADE    AVG_SAL</span></div><div class="line"><span class="comment">--  --------  -------  ----------</span></div><div class="line"><span class="comment">--    30           3   1566.66667</span></div><div class="line"><span class="comment">--    20           4   2175</span></div><div class="line"><span class="comment">--    10           4   2916.66667</span></div><div class="line"></div><div class="line"><span class="comment">-- 然后G中查询可以简化成：</span></div><div class="line">   <span class="keyword">select</span>  dname,t1.deptno,grade,avg_sal <span class="keyword">from</span></div><div class="line">   v$_dept_avg-sal_info t1</div><div class="line">   <span class="keyword">join</span> dept <span class="keyword">on</span> t1.deptno =dept.deptno)</div><div class="line">   <span class="keyword">where</span> t1.grade=</div><div class="line">   (</div><div class="line">	<span class="keyword">select</span> <span class="keyword">min</span>(grade) <span class="keyword">from</span> v$_dept_avg-sal_info t1</div><div class="line">   )</div></pre></td></tr></table></figure>
<h3 id="22-求比普通员工最高薪水还要高的经理人的名称"><a href="#22-求比普通员工最高薪水还要高的经理人的名称" class="headerlink" title="22. 求比普通员工最高薪水还要高的经理人的名称"></a>22. 求比普通员工最高薪水还要高的经理人的名称</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> ename, sal <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="keyword">in</span></div><div class="line">       (<span class="keyword">select</span> <span class="keyword">distinct</span> mgr <span class="keyword">from</span> emp <span class="keyword">where</span> mgr <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>)</div><div class="line">    <span class="keyword">and</span> sal &gt;</div><div class="line">    (</div><div class="line">       <span class="keyword">select</span> <span class="keyword">max</span>(sal) <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="keyword">not</span> <span class="keyword">in</span></div><div class="line">         (<span class="keyword">select</span> <span class="keyword">distinct</span> mgr <span class="keyword">from</span> emp <span class="keyword">where</span> mgr <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>)</div><div class="line">	)</div></pre></td></tr></table></figure>
<h3 id="23-面试题：比较效率"><a href="#23-面试题：比较效率" class="headerlink" title="23. 面试题：比较效率"></a>23. 面试题：比较效率</h3><pre><code>理论上前一句效率高，但实际上可能Oracle可能会自动对代码优化，所以不见得后一句就会慢。
</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">10</span> <span class="keyword">and</span> ename <span class="keyword">like</span> <span class="string">'%A%'</span>;    <span class="comment">--效率高，因为将过滤力度大的放在前面</span></div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'%A% and deptno = 10;</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;12-SQL1999-table-connections&quot;&gt;&lt;a href=&quot;#12-SQL1999-table-connections&quot; class=&quot;headerlink&quot; title=&quot;12. SQL1999_table_connections&quot;&gt;&lt;/a&gt;12. SQL1999_table_connections&lt;/h3&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename, dname,grade &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp e,deptd, salgrade s&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; e.deptno = d.deptno &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; e.sal &lt;span class=&quot;keyword&quot;&gt;between&lt;/span&gt; s.losal &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; s.hisal &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;job &amp;lt;&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;CLERK&#39;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;​           有没有办法把过滤条件和连接条件分开来? 出于这样考虑,Sql1999标准推出来了.有许多人用的还是&lt;/p&gt;
&lt;p&gt;旧的语法,所以得看懂这种语句.&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename,dname &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp,dept;(旧标准).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename,dname &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp** &lt;span class=&quot;keyword&quot;&gt;cross&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;join&lt;/span&gt;** dept;(1999标准)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename,dname &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp,dept &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; emp.deptno=dept.deptno (旧)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename,dname &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp &lt;span class=&quot;keyword&quot;&gt;join&lt;/span&gt; dept &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt;(emp.deptno = dept.deptno); 1999标准.没有Where语句.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename,dname &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp &lt;span class=&quot;keyword&quot;&gt;join&lt;/span&gt; dept &lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt;(deptno);等同上句,但不推荐使用.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename,grade &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp e &lt;span class=&quot;keyword&quot;&gt;join&lt;/span&gt; salgrade s &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt;(e.sal &lt;span class=&quot;keyword&quot;&gt;between&lt;/span&gt; s.losal &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; s.hisal);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;​    &lt;/p&gt;
    
    </summary>
    
      <category term="Oracle" scheme="https://okcthouder.github.io/categories/Oracle/"/>
    
    
      <category term="Oracle sql" scheme="https://okcthouder.github.io/tags/Oracle-sql/"/>
    
  </entry>
  
  <entry>
    <title>Oracle学习笔记(二)</title>
    <link href="https://okcthouder.github.io/2017/07/17/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C/"/>
    <id>https://okcthouder.github.io/2017/07/17/Oracle学习笔记-二/</id>
    <published>2017-07-17T08:30:18.000Z</published>
    <updated>2017-07-25T11:15:54.257Z</updated>
    
    <content type="html"><![CDATA[<h3 id="8-Group-by语句"><a href="#8-Group-by语句" class="headerlink" title="8. Group by语句"></a>8. Group by语句</h3><p>//需求:现在想求每个部门的平均薪水.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">select</span> <span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</div><div class="line"> <span class="keyword">select</span> deptno <span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</div><div class="line"> </div><div class="line"> <span class="keyword">select</span> deptno,job,<span class="keyword">max</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno,job;</div><div class="line"> </div><div class="line">求薪水值最高的人的名字.</div><div class="line"><span class="keyword">select</span> ename,<span class="keyword">max</span>(sal) <span class="keyword">from</span> emp;出错,因为max只有一个值,但等于max值的人可能好几个,不能匹配.</div><div class="line">应如下求:</div><div class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> sal=(<span class="keyword">select</span> <span class="keyword">max</span>(sal) <span class="keyword">from</span> emp);</div><div class="line"></div><div class="line">Group by语句应注意,</div><div class="line"></div><div class="line">出现在<span class="keyword">select</span>中的字段,如果没出现在组函数中,必须出现在<span class="keyword">Group</span> <span class="keyword">by</span>语句中.</div></pre></td></tr></table></figure>
  <a id="more"></a>
<h3 id="9-Having-对分组结果筛选"><a href="#9-Having-对分组结果筛选" class="headerlink" title="9. Having 对分组结果筛选"></a>9. Having 对分组结果筛选</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Where是对单条纪录进行筛选,Having是对分组结果进行筛选.</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(sal),deptno <span class="keyword">from</span> emp </div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno </div><div class="line"><span class="keyword">having</span> <span class="keyword">avg</span>(sal)&gt;<span class="number">2000</span>;</div><div class="line"></div><div class="line">查询工资大于1200雇员,按部门编号进行分组,分组后平均薪水大于1500,按工薪倒充排列.</div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp </div><div class="line"><span class="keyword">where</span> sal&gt;<span class="number">1200</span></div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno</div><div class="line"><span class="keyword">having</span> <span class="keyword">avg</span>(sal)&gt;<span class="number">1500</span></div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(sal) <span class="keyword">desc</span>;</div></pre></td></tr></table></figure>
<h3 id="10-字查询"><a href="#10-字查询" class="headerlink" title="10. 字查询"></a>10. 字查询</h3><p>​    谁挣的钱最多(谁:这个人的名字,  钱最多)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> 语句中嵌套<span class="keyword">select</span> 语句,可以在<span class="keyword">where</span>,<span class="keyword">from</span>后.</div></pre></td></tr></table></figure>
<p>​        问哪些人工资,在平均工资之上.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal&gt;(<span class="keyword">select</span> <span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp);</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//查找每个部门挣钱最多的那个人的名字.</div><div class="line"><span class="keyword">select</span> ename ,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">in</span>(<span class="keyword">select</span> <span class="keyword">max</span>(sal) <span class="keyword">from</span> ename <span class="keyword">group</span> <span class="keyword">by</span> deptno) //查询会多值.</div><div class="line"></div><div class="line">//应该如下:</div><div class="line"></div><div class="line"><span class="keyword">select</span>  <span class="keyword">max</span>(sal),deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;//当成一个表.语句如下:</div><div class="line"><span class="keyword">select</span> ename, sal <span class="keyword">from</span> emp <span class="keyword">join</span>(<span class="keyword">select</span>  <span class="keyword">max</span>(sal) max_sal,deptno <span class="keyword">from</span> emp <span class="keyword">group</span></div><div class="line"><span class="keyword">by</span> deptno) t <span class="keyword">on</span>(emp.sal=t.max_sal <span class="keyword">and</span> emp.deptno=t.deptno); </div><div class="line"></div><div class="line">//每个部门的平均薪水的等级. </div><div class="line">//分析:首先求平均薪水(当成表),把平均薪水和另外一张表连接.</div></pre></td></tr></table></figure>
<h3 id="11-self-table-connection"><a href="#11-self-table-connection" class="headerlink" title="11. self_table_connection"></a>11. self_table_connection</h3><p>把某个人的名字以及他的经理人的名字求出来(经理人及这个人在表中同处一行)</p>
<p>分析:首先求出这个人的名字,取他的编号,然后从另一张表与其相对应编号,然后找到经理的名字.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> e1.ename ,e2.ename <span class="keyword">from</span> emp e1,emp e2 <span class="keyword">where</span> e1.mgr= e2.empno.</div></pre></td></tr></table></figure>
<p>//empno编号和MGR都是编号.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;8-Group-by语句&quot;&gt;&lt;a href=&quot;#8-Group-by语句&quot; class=&quot;headerlink&quot; title=&quot;8. Group by语句&quot;&gt;&lt;/a&gt;8. Group by语句&lt;/h3&gt;&lt;p&gt;//需求:现在想求每个部门的平均薪水.&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;avg&lt;/span&gt;(sal) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; deptno;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; deptno &lt;span class=&quot;keyword&quot;&gt;avg&lt;/span&gt;(sal) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; deptno;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; deptno,job,&lt;span class=&quot;keyword&quot;&gt;max&lt;/span&gt;(sal) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; deptno,job;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;求薪水值最高的人的名字.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename,&lt;span class=&quot;keyword&quot;&gt;max&lt;/span&gt;(sal) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp;出错,因为max只有一个值,但等于max值的人可能好几个,不能匹配.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;应如下求:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; sal=(&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;max&lt;/span&gt;(sal) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Group by语句应注意,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;出现在&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt;中的字段,如果没出现在组函数中,必须出现在&lt;span class=&quot;keyword&quot;&gt;Group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt;语句中.&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Oracle" scheme="https://okcthouder.github.io/categories/Oracle/"/>
    
    
      <category term="Oracle" scheme="https://okcthouder.github.io/tags/Oracle/"/>
    
      <category term="sql" scheme="https://okcthouder.github.io/tags/sql/"/>
    
  </entry>
  
  <entry>
    <title>Oracle学习笔记(一)</title>
    <link href="https://okcthouder.github.io/2017/07/16/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/"/>
    <id>https://okcthouder.github.io/2017/07/16/Oracle学习笔记-一/</id>
    <published>2017-07-16T08:38:47.000Z</published>
    <updated>2017-07-23T08:40:32.831Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sqlplus sys/所设定的密码 as sysdba(用管理员登陆)</div><div class="line"><span class="keyword">alter</span> <span class="keyword">user</span> scott <span class="keyword">account</span> <span class="keyword">unlock</span>;(解锁scott账户)</div></pre></td></tr></table></figure>
<h3 id="1-table-structure"><a href="#1-table-structure" class="headerlink" title="1. table structure"></a>1. table structure</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">描述某一张表：desc 表名</div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 表名</div></pre></td></tr></table></figure>
<h3 id="2-select-语句"><a href="#2-select-语句" class="headerlink" title="2. select 语句"></a>2. select 语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">计算数据可以用空表：比如：<span class="keyword">select</span> <span class="number">2</span>*<span class="number">3</span> <span class="keyword">from</span> dual</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> ename,sal*<span class="number">12</span> annual_sal <span class="keyword">from</span> emp;与<span class="keyword">select</span> ename,sal*<span class="number">12</span> <span class="string">"annual sal"</span> <span class="keyword">from</span> emp;区别，加双引号保持原大小写。不加全变大写。</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> ename || <span class="string">"abcd"</span> 如果连接字符串中含有单引号，用两个单引号代替一个单引号。(||代表连接符)</div></pre></td></tr></table></figure>
 <a id="more"></a>
<h3 id="3-distinct"><a href="#3-distinct" class="headerlink" title="3. distinct"></a>3. distinct</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> deptno <span class="keyword">from</span> emp;</div><div class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> deptno <span class="keyword">from</span> emp;</div><div class="line"></div><div class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> deptno <span class="keyword">from</span> emp;</div><div class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> deptno ,job <span class="keyword">from</span> emp</div><div class="line">去掉deptno,job两者组合的重复。更多的项，就是这么多项的组合的不重复组合。</div></pre></td></tr></table></figure>
<h3 id="4-where"><a href="#4-where" class="headerlink" title="4. where"></a>4. where</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno =<span class="number">10</span>;</div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno &lt;&gt;<span class="number">10</span>;不等于10        </div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename =<span class="string">'bike'</span>;</div><div class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> <span class="number">800</span> <span class="keyword">and</span> <span class="number">1500</span> (&gt;=<span class="number">800</span> <span class="keyword">and</span> &lt;=<span class="number">1500</span>)空值处理:</div><div class="line"><span class="keyword">select</span> ename,sal,comm <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> (<span class="keyword">not</span>) <span class="literal">null</span>;</div><div class="line"><span class="keyword">select</span> ename,sal,comm <span class="keyword">from</span> emp <span class="keyword">where</span> ename ( <span class="keyword">not</span>)<span class="keyword">in</span> (<span class="string">'smith'</span>,<span class="string">'king'</span>,<span class="string">'abc'</span>);</div><div class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'_A%'</span>;_代表一个字母,%代表0个或多个字母. 如果查询%</div><div class="line">可用转义字符.\%. 还可以用escape '$'比如:<span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'%$a%'</span> escape <span class="string">'$'</span>;</div></pre></td></tr></table></figure>
<h3 id="5-orderby"><a href="#5-orderby" class="headerlink" title="5. orderby"></a>5. orderby</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept; </div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept <span class="keyword">order</span> <span class="keyword">by</span> dept <span class="keyword">desc</span>;(默认:asc)</div><div class="line"><span class="keyword">select</span> ename,sal,deptno <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> deptno <span class="keyword">asc</span>,ename <span class="keyword">desc</span>;</div></pre></td></tr></table></figure>
<h3 id="6-sql-function1"><a href="#6-sql-function1" class="headerlink" title="6. sql function1"></a>6. sql function1</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> ename,sal*<span class="number">12</span> annual_sal <span class="keyword">from</span> emp</div><div class="line"><span class="keyword">where</span> ename <span class="keyword">not</span> <span class="keyword">like</span> <span class="string">'_A%'</span> <span class="keyword">and</span> sal&gt;<span class="number">800</span></div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</div><div class="line"></div><div class="line"><span class="keyword">select</span> <span class="keyword">lower</span>(ename) <span class="keyword">from</span> emp;</div><div class="line"></div><div class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp </div><div class="line"><span class="keyword">where</span> <span class="keyword">lower</span>(ename) <span class="keyword">like</span> <span class="string">'_a%'</span>;等同于</div><div class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'_a%'</span> <span class="keyword">or</span> ename <span class="keyword">like</span> <span class="string">'_A%'</span>;</div><div class="line"></div><div class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(ename,<span class="number">2</span>,<span class="number">3</span>) <span class="keyword">from</span> emp;从第二字符截,一共截三个字符.</div><div class="line"><span class="keyword">select</span> <span class="keyword">chr</span>(<span class="number">65</span>) <span class="keyword">from</span> dual 结果为:A</div><div class="line"><span class="keyword">select</span> <span class="keyword">ascii</span>(<span class="string">'a'</span>) <span class="keyword">from</span> dual 结果为:<span class="number">65</span></div><div class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">23.652</span>,<span class="number">1</span>) <span class="keyword">from</span> dual; 结果为: 23.7</div><div class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">23.652</span>,<span class="number">-1</span>) <span class="keyword">from</span> dual; 20</div><div class="line">  </div><div class="line"><span class="keyword">select</span> to_char(sal,<span class="string">'$99_999_999'</span>) <span class="keyword">from</span> emp;</div><div class="line"><span class="keyword">select</span> to_char(sal,<span class="string">'L99_999_999'</span>) <span class="keyword">from</span> emp;人民币符号,L:代表本地符号</div><div class="line"></div><div class="line">这个需要掌握牢:</div><div class="line"><span class="keyword">select</span> birthdate <span class="keyword">from</span> emp;</div><div class="line">显示为:</div><div class="line">BIRTHDATE</div><div class="line"><span class="comment">----------------</span></div><div class="line">17-12月-80</div><div class="line"><span class="comment">----------------</span></div><div class="line"></div><div class="line">改为:</div><div class="line"><span class="keyword">select</span> to_char(birthdate,<span class="string">'YYYY-MM-DD HH:MI:SS'</span>) <span class="keyword">from</span> emp;</div><div class="line"></div><div class="line">显示:</div><div class="line"> </div><div class="line">BIRTHDATE</div><div class="line"><span class="comment">-------------------</span></div><div class="line">1980-12-17 12:00:00</div><div class="line"><span class="comment">-------------------</span></div><div class="line"></div><div class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'YYYY-MM-DD HH24:MI:SS'</span>) <span class="keyword">from</span> dual; //也可以改为:HH12</div><div class="line">TO_CHAR(SYSDATE,'YY</div><div class="line"><span class="comment">-------------------</span></div><div class="line">2017-07-15 14:46:14</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">to_date函数:</div><div class="line">select ename,birthdate from emp where birthdate &gt; to_date('1981-2-20 12:34:56','YYYY-MM-DD HH24:MI:SS');</div><div class="line">如果直接写 birthdate&gt;'1981-2-20 12:34:56'会出现格式不匹配,因为表中的格式为: DD-MM月-YY.</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">select sal from emp where sal&gt;888.88 无错.但</div><div class="line">select sal from emp where sal&gt;$1,250,00;</div><div class="line">会出现无效字符错误. </div><div class="line">改为:</div><div class="line">select sal from emp where sal&gt;to_number('$1,250.00','$9,999.99');s</div><div class="line"></div><div class="line">把空值改为0</div><div class="line">select ename,sal*12+nvl(comm,0) from emp;</div><div class="line">这样可以防止comm为空时,sal*12相加也为空的情况.</div></pre></td></tr></table></figure>
<h3 id="7-Group-function-组函数"><a href="#7-Group-function-组函数" class="headerlink" title="7.  Group function 组函数"></a>7.  Group function 组函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">max,min,avg ,count,sum函数</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> to_char(<span class="keyword">avg</span>(sal),<span class="string">'99999999,99'</span>) <span class="keyword">from</span> emp;</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="keyword">avg</span>(sal),<span class="number">2</span>) <span class="keyword">from</span> emp;</div><div class="line">结果:2073.21</div><div class="line">  </div><div class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> emp <span class="keyword">where</span> deptno=<span class="number">10</span>;</div><div class="line"><span class="keyword">select</span> <span class="keyword">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span> deptno=<span class="number">10</span>; count某个字段,如果这个字段不为空就算一个.</div><div class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> deptno) <span class="keyword">from</span> emp;</div><div class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(sal) <span class="keyword">from</span> emp;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sqlplus sys/所设定的密码 as sysdba(用管理员登陆)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;user&lt;/span&gt; scott &lt;span class=&quot;keyword&quot;&gt;account&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;unlock&lt;/span&gt;;(解锁scott账户)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;1-table-structure&quot;&gt;&lt;a href=&quot;#1-table-structure&quot; class=&quot;headerlink&quot; title=&quot;1. table structure&quot;&gt;&lt;/a&gt;1. table structure&lt;/h3&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;描述某一张表：desc 表名&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; 表名&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2-select-语句&quot;&gt;&lt;a href=&quot;#2-select-语句&quot; class=&quot;headerlink&quot; title=&quot;2. select 语句&quot;&gt;&lt;/a&gt;2. select 语句&lt;/h3&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;计算数据可以用空表：比如：&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; dual&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename,sal*&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt; annual_sal &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp;与&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename,sal*&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;annual sal&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; emp;区别，加双引号保持原大小写。不加全变大写。&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; ename || &lt;span class=&quot;string&quot;&gt;&quot;abcd&quot;&lt;/span&gt; 如果连接字符串中含有单引号，用两个单引号代替一个单引号。(||代表连接符)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Oracle" scheme="https://okcthouder.github.io/categories/Oracle/"/>
    
    
      <category term="Oracle sql" scheme="https://okcthouder.github.io/tags/Oracle-sql/"/>
    
  </entry>
  
  <entry>
    <title>java读书笔记-Thread类</title>
    <link href="https://okcthouder.github.io/2017/07/14/java%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-Thread%E7%B1%BB/"/>
    <id>https://okcthouder.github.io/2017/07/14/java读书笔记-Thread类/</id>
    <published>2017-07-14T06:54:22.000Z</published>
    <updated>2017-07-25T06:57:20.362Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、线程的三个常用方法"><a href="#一、线程的三个常用方法" class="headerlink" title="一、线程的三个常用方法"></a>一、线程的三个常用方法</h3><p><img src="http://img.blog.csdn.net/20170714082842505?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
 <a id="more"></a>
<h3 id="二、线程死锁图解"><a href="#二、线程死锁图解" class="headerlink" title="二、线程死锁图解"></a>二、线程死锁图解</h3><p><img src="http://img.blog.csdn.net/20170714082902509?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img">            Thread1锁住了上面的对象，等待锁住下面的对象来完成执行过程。但是下面的对象被Thread2锁住了，它也等着锁住上面的对象来完成执行，因此陷入了死锁。</p>
<h3 id="三、死锁小程序"><a href="#三、死锁小程序" class="headerlink" title="三、死锁小程序"></a>三、死锁小程序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeadLock</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">int</span> flag = <span class="number">1</span>;</div><div class="line">	<span class="keyword">static</span> Object o1 = <span class="keyword">new</span> Object(), o2 = <span class="keyword">new</span> Object();</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">	System.out.println(<span class="string">"flag="</span> + flag);</div><div class="line">		<span class="keyword">if</span>(flag == <span class="number">1</span>) &#123;</div><div class="line">			<span class="keyword">synchronized</span>(o1) &#123;</div><div class="line">				<span class="keyword">try</span> &#123;</div><div class="line">					Thread.sleep(<span class="number">500</span>);</div><div class="line">				&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">					e.printStackTrace();</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">synchronized</span>(o2) &#123;</div><div class="line">					System.out.println(<span class="string">"1"</span>);	</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(flag == <span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">synchronized</span>(o2) &#123;</div><div class="line">				<span class="keyword">try</span> &#123;</div><div class="line">					Thread.sleep(<span class="number">500</span>);</div><div class="line">				&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">					e.printStackTrace();</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">synchronized</span>(o1) &#123;</div><div class="line">					System.out.println(<span class="string">"0"</span>);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;	</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		TestDeadLock td1 = <span class="keyword">new</span> TestDeadLock();</div><div class="line">		TestDeadLock td2 = <span class="keyword">new</span> TestDeadLock();</div><div class="line">		td1.flag = <span class="number">1</span>;</div><div class="line">		td2.flag = <span class="number">0</span>;</div><div class="line">		Thread t1 = <span class="keyword">new</span> Thread(td1);</div><div class="line">		Thread t2 = <span class="keyword">new</span> Thread(td2);</div><div class="line">		t1.start();</div><div class="line">		t2.start();</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="四、面试题"><a href="#四、面试题" class="headerlink" title="四、面试题"></a>四、面试题</h3><p>下面举个小例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TT</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> b = <span class="number">100</span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">		<span class="comment">//Thread.sleep(2000);</span></div><div class="line">		b = <span class="number">1000</span>;</div><div class="line">		Thread.sleep(<span class="number">5000</span>);</div><div class="line">		System.out.println(<span class="string">"b = "</span> + b);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">		Thread.sleep(<span class="number">2500</span>);</div><div class="line">		b = <span class="number">2000</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			m1();</div><div class="line">		&#125; <span class="keyword">catch</span>(Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">		TT tt = <span class="keyword">new</span> TT();</div><div class="line">		Thread t = <span class="keyword">new</span> Thread(tt);</div><div class="line">		t.start();</div><div class="line">		</div><div class="line">		tt.m2();</div><div class="line">		System.out.println(tt.b);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面的输出结果是：2000</p>
<h3 id="五、wait-跟sleep-区别"><a href="#五、wait-跟sleep-区别" class="headerlink" title="五、wait()跟sleep()区别"></a>五、wait()跟sleep()区别</h3><p>1)wait时别的线程可以访问锁定对象(调用wait方法的时候必须锁定该对象)</p>
<p>2)sleep时别的线程也不可以访问锁定对象</p>
<p>2)Thread.sleep()与Object.wait()二者都可以暂停当前线程，释放CPU控制权，主要的区别在于Object.wait()在释放CPU同时，释放了对象锁的控制，而在同步块中的Thread.sleep()方法并不释放锁，仅释放CPU控制权。</p>
<h3 id="六、wait-跟notify-方法"><a href="#六、wait-跟notify-方法" class="headerlink" title="六、wait()跟notify()方法"></a>六、wait()跟notify()方法</h3><pre><code> 1)wait()方法与notify()必须要与synchronized(resource)一起使用。(也就是wait与notify针对已经获取了resource锁的线程进行操作，从语法角度来说就是Obj.wait(),Obj.notify必须在synchronized(Obj){...}语句块内。)

2) wait和notify方法均可释放对象的锁，但wait同时释放CPU控制权，即它后面的代码停止执行，线程进入阻塞状态，而notify方法不立刻释放CPU控制权，而是在相应的synchronized(){}语句块执行结束，再自动释放锁。
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;一、线程的三个常用方法&quot;&gt;&lt;a href=&quot;#一、线程的三个常用方法&quot; class=&quot;headerlink&quot; title=&quot;一、线程的三个常用方法&quot;&gt;&lt;/a&gt;一、线程的三个常用方法&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170714082842505?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://okcthouder.github.io/categories/java/"/>
    
    
      <category term="Thread" scheme="https://okcthouder.github.io/tags/Thread/"/>
    
  </entry>
  
  <entry>
    <title>java读书笔记-IO类-编程小问题</title>
    <link href="https://okcthouder.github.io/2017/07/13/java%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-IO%E7%B1%BB-%E7%BC%96%E7%A8%8B%E5%B0%8F%E9%97%AE%E9%A2%98/"/>
    <id>https://okcthouder.github.io/2017/07/13/java读书笔记-IO类-编程小问题/</id>
    <published>2017-07-13T11:20:28.000Z</published>
    <updated>2017-07-26T11:24:19.463Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最近在重新复习下java SE的内容，把一下小问题记录下来。</p>
 <a id="more"></a>
<h3 id="一、Java流式输入输出原理图"><a href="#一、Java流式输入输出原理图" class="headerlink" title="一、Java流式输入输出原理图"></a>一、Java流式输入输出原理图</h3><p><img src="http://img.blog.csdn.net/20170712114742456?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h3 id="二、流的分类"><a href="#二、流的分类" class="headerlink" title="二、流的分类"></a>二、流的分类</h3><p><img src="http://img.blog.csdn.net/20170712114801974?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h3 id="三、节点流类型"><a href="#三、节点流类型" class="headerlink" title="三、节点流类型"></a>三、节点流类型</h3><p><img src="http://img.blog.csdn.net/20170712114821261?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><pre><code>以stream结尾的是字节流，以reader或writer结尾的是字符流。
</code></pre><h4 id="一、字节流文件复制"><a href="#一、字节流文件复制" class="headerlink" title="一、字节流文件复制"></a>一、字节流文件复制</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileOutputStream</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	  <span class="keyword">int</span> b = <span class="number">0</span>;</div><div class="line">	  FileInputStream in = <span class="keyword">null</span>;</div><div class="line">	  FileOutputStream out = <span class="keyword">null</span>;</div><div class="line">	  <span class="keyword">try</span> &#123;</div><div class="line">	    in = <span class="keyword">new</span> FileInputStream(<span class="string">"d:/share/java/HelloWorld.java"</span>);</div><div class="line">	    out = <span class="keyword">new</span> FileOutputStream(<span class="string">"d:/share/java/io/HW.java"</span>);</div><div class="line">	    <span class="keyword">while</span>((b=in.read())!=-<span class="number">1</span>)&#123;</div><div class="line">	      out.write(b);</div><div class="line">	    &#125;</div><div class="line">	    in.close();</div><div class="line">	    out.close();</div><div class="line">	  &#125; <span class="keyword">catch</span> (FileNotFoundException e2) &#123;</div><div class="line">	    System.out.println(<span class="string">"找不到指定文件"</span>); System.exit(-<span class="number">1</span>);</div><div class="line">	  &#125; <span class="keyword">catch</span> (IOException e1) &#123;</div><div class="line">	    System.out.println(<span class="string">"文件复制错误"</span>); System.exit(-<span class="number">1</span>);</div><div class="line">	  &#125;</div><div class="line">	  System.out.println(<span class="string">"文件已复制"</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="二、BufferedWriter和BufferedReader图解"><a href="#二、BufferedWriter和BufferedReader图解" class="headerlink" title="二、BufferedWriter和BufferedReader图解"></a>二、BufferedWriter和BufferedReader图解</h4><pre><code>如果只是用FileWriter的话只能每次写入一个字符，而在外面再包装一层BufferedWriter的话一次可以写入一个缓冲区的内容。
</code></pre><p><img src="http://img.blog.csdn.net/20170712114952059?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<h4 id="三、OutputStreamWriter工作原理"><a href="#三、OutputStreamWriter工作原理" class="headerlink" title="三、OutputStreamWriter工作原理"></a>三、OutputStreamWriter工作原理</h4><pre><code>如果只是用FileWriter的话只能每次写入一个字节，而在外面再包装一层BufferedWriter的话一次可以写入一个字符串的内容。
</code></pre><p><img src="http://img.blog.csdn.net/20170712115009370?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvT25seUxvdmVfS0Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;最近在重新复习下java SE的内容，把一下小问题记录下来。&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://okcthouder.github.io/categories/java/"/>
    
    
      <category term="java" scheme="https://okcthouder.github.io/tags/java/"/>
    
      <category term="IO" scheme="https://okcthouder.github.io/tags/IO/"/>
    
      <category term="编程小问题" scheme="https://okcthouder.github.io/tags/%E7%BC%96%E7%A8%8B%E5%B0%8F%E9%97%AE%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>java读书笔记-常用类-编程小问题</title>
    <link href="https://okcthouder.github.io/2017/07/11/java%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E5%B8%B8%E7%94%A8%E7%B1%BB-%E7%BC%96%E7%A8%8B%E5%B0%8F%E9%97%AE%E9%A2%98/"/>
    <id>https://okcthouder.github.io/2017/07/11/java读书笔记-常用类-编程小问题/</id>
    <published>2017-07-11T11:27:28.000Z</published>
    <updated>2017-07-26T11:29:45.203Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最近在重新复习下java SE中常用类的内容，把一下小问题记录下来。</p>
 <a id="more"></a>
<h3 id="一、用Java编写一个程序，输出一个字符串中的大写英文字母数，小写英文字母数以及非英文字母数。"><a href="#一、用Java编写一个程序，输出一个字符串中的大写英文字母数，小写英文字母数以及非英文字母数。" class="headerlink" title="一、用Java编写一个程序，输出一个字符串中的大写英文字母数，小写英文字母数以及非英文字母数。"></a>一、用Java编写一个程序，输出一个字符串中的大写英文字母数，小写英文字母数以及非英文字母数。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.regex.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">      <span class="comment">//方法一</span></div><div class="line">		<span class="comment">//String s = "AaaaABBBBcc&amp;^%adfsfdCCOOkk99876 _haHA";</span></div><div class="line">		<span class="comment">//int lCount = 0, uCount = 0, oCount = 0;</span></div><div class="line">		<span class="comment">/*</span></div><div class="line">		for(int i=0; i&lt;s.length(); i++) &#123;</div><div class="line">			char c = s.charAt(i);</div><div class="line">			if(c &gt;= 'a' &amp;&amp; c &lt;= 'z') &#123;</div><div class="line">				lCount ++;</div><div class="line">			&#125; else if (c &gt;='A' &amp;&amp; c &lt;= 'Z') &#123;</div><div class="line">				uCount ++;</div><div class="line">			&#125; else &#123;</div><div class="line">				oCount ++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		*/</div><div class="line">      </div><div class="line">      <span class="comment">//方法二</span></div><div class="line">		<span class="comment">/*</span></div><div class="line">		String sL = "abcdefghijklmnopqrstuvwxyz";</div><div class="line">		String sU = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";</div><div class="line">		for(int i=0; i&lt;s.length(); i++) &#123;</div><div class="line">			char c = s.charAt(i);</div><div class="line">			if(sL.indexOf(c) != -1) &#123;</div><div class="line">				lCount ++;</div><div class="line">			&#125; else if (sU.indexOf(c) != -1) &#123;</div><div class="line">				uCount ++;</div><div class="line">			&#125; else &#123;</div><div class="line">				oCount ++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		*/</div><div class="line">		</div><div class="line">      <span class="comment">//方法三</span></div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;s.length(); i++) &#123;</div><div class="line">			<span class="keyword">char</span> c = s.charAt(i);</div><div class="line">			<span class="keyword">if</span>(Character.isLowerCase(c)) &#123;</div><div class="line">				lCount ++;</div><div class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (Character.isUpperCase(c)) &#123;</div><div class="line">				uCount ++;</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				oCount ++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(lCount + <span class="string">" "</span> + uCount + <span class="string">" "</span> + oCount);</div></pre></td></tr></table></figure>
<h3 id="二、将“1-2-3-4-5-6-7-8”这个字符串分解为二维数组。"><a href="#二、将“1-2-3-4-5-6-7-8”这个字符串分解为二维数组。" class="headerlink" title="二、将“1,2;3,4,5;6,7,8”这个字符串分解为二维数组。"></a>二、将“1,2;3,4,5;6,7,8”这个字符串分解为二维数组。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayParser</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">    <span class="keyword">double</span>[][] d;</div><div class="line">    String = <span class="string">"1,2;3,4,5;6,7,8"</span>;</div><div class="line">    String[] sFirst = s.split(<span class="string">";"</span>);</div><div class="line">    d = <span class="keyword">new</span> <span class="keyword">double</span>[sFirst.length][];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sFirst.length; i++)&#123;</div><div class="line">      String[] sSecond = sFirst[i].split(<span class="string">","</span>);</div><div class="line">      d[i] = <span class="keyword">new</span> <span class="keyword">double</span>[sSecond.length];</div><div class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sSecong.length; j++)&#123;</div><div class="line">        d[i][j] = Double.parseDouble(sSecond[j]);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; d.length; i++)&#123;</div><div class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; d[i].length; j++)&#123;</div><div class="line">        System.out.print(d[i][j] + <span class="string">" "</span>);</div><div class="line">      &#125;</div><div class="line">      System.out.println();</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="三、利用递归列出目录结构"><a href="#三、利用递归列出目录结构" class="headerlink" title="三、利用递归列出目录结构"></a>三、利用递归列出目录结构</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileList</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		File f = <span class="keyword">new</span> File(<span class="string">"d:/A"</span>);</div><div class="line">		System.out.println(f.getName());</div><div class="line">		tree(f, <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">tree</span><span class="params">(File f, <span class="keyword">int</span> level)</span> </span>&#123;</div><div class="line"></div><div class="line">		String preStr = <span class="string">""</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;level; i++) &#123;</div><div class="line">			preStr += <span class="string">"    "</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		File childs = f.listFiles();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;childs.length; i++) &#123;</div><div class="line">			System.out.println(preStr + childs[i].getName());</div><div class="line">			<span class="keyword">if</span>(childs[i].isDirectory()) &#123;</div><div class="line">				tree(childs[i], level + <span class="number">1</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="四、编写一个方法，输出在一个字符串中，指定字符串出现的次数"><a href="#四、编写一个方法，输出在一个字符串中，指定字符串出现的次数" class="headerlink" title="四、编写一个方法，输出在一个字符串中，指定字符串出现的次数"></a>四、编写一个方法，输出在一个字符串中，指定字符串出现的次数</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">	String s = <span class="string">"sunjavahpjavaokjavajjavahahajavajavagoodjava"</span>;</div><div class="line">	</div><div class="line">	String sToFind = <span class="string">"java"</span>;</div><div class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> index = -<span class="number">1</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">while</span>((index = s.indexOf(sToFind)) != -<span class="number">1</span>) &#123;</div><div class="line">		s = s.substring(index + sToFind.length());</div><div class="line">		count ++;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	System.out.println(count);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;最近在重新复习下java SE中常用类的内容，把一下小问题记录下来。&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://okcthouder.github.io/categories/java/"/>
    
    
      <category term="java" scheme="https://okcthouder.github.io/tags/java/"/>
    
      <category term="class" scheme="https://okcthouder.github.io/tags/class/"/>
    
      <category term="递归" scheme="https://okcthouder.github.io/tags/%E9%80%92%E5%BD%92/"/>
    
  </entry>
  
  <entry>
    <title>别再乱用jQuery return false</title>
    <link href="https://okcthouder.github.io/2017/05/14/%E5%88%AB%E5%86%8D%E4%B9%B1%E7%94%A8jQuery%20return%20false/"/>
    <id>https://okcthouder.github.io/2017/05/14/别再乱用jQuery return false/</id>
    <published>2017-05-14T07:48:12.000Z</published>
    <updated>2017-07-29T07:52:33.059Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>​    event.preventDefault()方法是用于取消事件的默认行为，但此方法并不被ie支持，在ie下需要用window.event.returnValue = false; 来实现。这不是<a href="http://lib.csdn.net/base/jquery" target="_blank" rel="external">jQuery</a>的方法，是JS本身自带的。</p>
 <a id="more"></a>
<p>event.preventDefault()<br>​    该方法将通知 Web 浏览器不要执行与事件关联的默认动作（如果存在这样的动作）。例如，如果 type 属性是 “submit”，在事件传播的任意阶段可以调用任意的事件句柄，通过调用该方法，可以阻止提交表单。注意，如果 Event 对象的 cancelable 属性是 fasle，那么就没有默认动作，或者不能阻止默认动作。无论哪种情况，调用该方法都没有作用。</p>
<p>event.stopPropagation()<br>​    该方法将停止事件的冒泡，阻止它被分派到其他 Document 节点。在事件冒泡的任何阶段都可以调用它。注意，虽然该方法不能阻止同一个 Document 节点上的其他事件句柄被调用，但是它可以阻止把事件分派到其他节点。<br>event是DOM的事件方法，所以不是单独使用，比如指定DOM。</p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>在<a href="http://lib.csdn.net/base/jquery" target="_blank" rel="external">jQuery</a>代码中，我们常见用return false来阻止浏览器的默认行为。例如点击链接，浏览器默认打开一个新窗口/标签，为了阻止浏览器的默认行为，我们往往这样操作：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"a.toggle"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </div><div class="line">    $(<span class="string">"#mydiv"</span>).toggle();  </div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>这段代码的作用是通过点击toggle来隐藏或显示#mydiv，并阻止浏览器继续访问href指定链接。<a href="http://lib.csdn.net/base/softwaretest" target="_blank" rel="external">测试</a>如下：</p>
<p><a href="http://www.berlinix.com/js/jquery-return-false.php#" target="_blank" rel="external">click toggle</a></p>
<p>点击上一行的toggle，这段文字将被显示或隐藏。</p>
<h2 id="return-false的作用"><a href="#return-false的作用" class="headerlink" title="return false的作用"></a>return false的作用</h2><p>return false达到了我们想要的目的，但这并不是阻止浏览器执行默认行为的正确方法。调用return false，它实际完成了3件事：</p>
<h4 id="1-event-preventDefault"><a href="#1-event-preventDefault" class="headerlink" title="1.event.preventDefault()"></a>1.event.preventDefault()</h4><h4 id="2-event-stopPropagation"><a href="#2-event-stopPropagation" class="headerlink" title="2.event.stopPropagation()"></a>2.event.stopPropagation()</h4><h4 id="3-停止回调函数执行并立即返回。"><a href="#3-停止回调函数执行并立即返回。" class="headerlink" title="3.停止回调函数执行并立即返回。"></a>3.停止回调函数执行并立即返回。</h4><p>我们真正的目的是event.preventDefault()，后两者可不是我们想要的。<a href="http://lib.csdn.net/base/javascript" target="_blank" rel="external">JavaScript</a>事件有两种，一种称为事件冒泡（event bubbling），一种称为事件捕捉（event capturing）。事件冒泡指事件在初始DOM上触发，通过DOM树往上在每一级父元素上触发；当事件向下冒泡时，我们则称之为事件捕获。</p>
<h2 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h2><p>因为return false多做了两件事，由此为代码埋下隐患。下面有一个简单的例子，点击一个链接，加载新的页面内容到当前页面：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;div class="post"&gt;  </div><div class="line">    &lt;a href="/js/loadp1.txt"&gt;Click here to load page1&lt;/a&gt;  </div><div class="line">    &lt;div class="content"&gt;  </div><div class="line">    &lt;/div&gt;  </div><div class="line">&lt;/div&gt;  </div><div class="line">  </div><div class="line">&lt;div class="post"&gt;  </div><div class="line">    &lt;a href="/js/loadp2.txt"&gt;Click here to load page2&lt;/a&gt;  </div><div class="line">    &lt;div class="content"&gt;  </div><div class="line">    &lt;/div&gt;  </div><div class="line">&lt;/div&gt;  </div><div class="line">  </div><div class="line">$("div.post a").click(function() &#123;  </div><div class="line">    var href = $(this).attr("href");  </div><div class="line">    $(this).next().load(href);  </div><div class="line">    return false;  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><a href="http://lib.csdn.net/base/softwaretest" target="_blank" rel="external">测试</a>如下：</p>
<p><a href="http://www.berlinix.com/js/loadp1.txt" target="_blank" rel="external">Click here to load page1</a></p>
<p><a href="http://www.berlinix.com/js/loadp2.txt" target="_blank" rel="external">Click here to load page2</a></p>
<p>​    点击链接就能加载页面内容到当前页，一切都OK。现在我们想要加一个新功能，例如论坛帖子的浏览，只有当前点击的帖子内容才会显示，其他帖子都隐藏。为此我们需要为div.post加一个click()事件处理：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"div.post"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </div><div class="line">    $(<span class="string">"div.post .content"</span>).hide();          <span class="comment">// hide all content  </span></div><div class="line">    $(<span class="keyword">this</span>).children(<span class="string">".content"</span>).show();    <span class="comment">// show this one  </span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>​    添加完这段代码后，我们发现它不生效，缘故是因为<code>$(&quot;div.post a&quot;).click(function() { return false; });</code>，由于return false执行了event.stopPropagation()，因此事件不能冒泡到上一级DOM，即<code>$(&quot;div.post&quot;).click()</code>不会被事件触发。要达成我们的任务，应该把return false替换为event.preventDefault()：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"div.post a"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;  </div><div class="line">    <span class="keyword">var</span> href = $(<span class="keyword">this</span>).attr(<span class="string">"href"</span>);  </div><div class="line">    $(<span class="keyword">this</span>).next().load(href);  </div><div class="line">    e.preventDefault();  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>测试修改后的代码：</p>
<p><a href="http://www.berlinix.com/js/loadp1.txt" target="_blank" rel="external">Click here to load page1</a></p>
<p><a href="http://www.berlinix.com/js/loadp2.txt" target="_blank" rel="external">Click here to load page2</a></p>
<h2 id="return-false-和-live-delegate"><a href="#return-false-和-live-delegate" class="headerlink" title="return false 和 live/delegate"></a>return false 和 live/delegate</h2><p>如果把<strong>return false和live/delegate</strong>事件混用，情况就更糟糕了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"a"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </div><div class="line">    <span class="comment">// do something  </span></div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;  </div><div class="line">&#125;);  </div><div class="line">  </div><div class="line">$(<span class="string">"a"</span>).live(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </div><div class="line">    <span class="comment">// this won't fire  </span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>如果确实需要阻止事件冒泡，也应该<strong>显式</strong>地调用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"div.post"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </div><div class="line">    <span class="comment">// do something  </span></div><div class="line">&#125;);  </div><div class="line">$(<span class="string">"div.post a"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;  </div><div class="line">    <span class="comment">// 浏览器跳转到新页面（默认行为）  </span></div><div class="line">    <span class="comment">// 但阻止事件冒泡，即不会执行$("div.post").click()  </span></div><div class="line">    e.stopPropagation();  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="event-stoplmmediatePropagetion"><a href="#event-stoplmmediatePropagetion" class="headerlink" title="event.stoplmmediatePropagetion()"></a>event.stoplmmediatePropagetion()</h2><p>​    event.stopPropagation()用于阻止事件冒泡，jQuery中还有另一个函数：event.stopImmediatePropagation()，它用于阻止一个事件的继续执行，即使当前对象上还绑定了其他处理函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"div a"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </div><div class="line">    <span class="comment">// do something  </span></div><div class="line">&#125;);  </div><div class="line">  </div><div class="line">$(<span class="string">"div a"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;  </div><div class="line">    <span class="comment">// stop immediate propagation  </span></div><div class="line">    e.stopImmediatePropagation();  </div><div class="line">&#125;);  </div><div class="line">  </div><div class="line">$(<span class="string">"div a"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </div><div class="line">    <span class="comment">// never fires  </span></div><div class="line">&#125;);  </div><div class="line">  </div><div class="line">$(<span class="string">"div a"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </div><div class="line">    <span class="comment">// never fires  </span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>​    最后结论是：理解return false，尽量避免使用它，请用event.preventDefault()替代return false。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;​    event.preventDefault()方法是用于取消事件的默认行为，但此方法并不被ie支持，在ie下需要用window.event.returnValue = false; 来实现。这不是&lt;a href=&quot;http://lib.csdn.net/base/jquery&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;jQuery&lt;/a&gt;的方法，是JS本身自带的。&lt;/p&gt;
    
    </summary>
    
      <category term="javascript" scheme="https://okcthouder.github.io/categories/javascript/"/>
    
      <category term="jQuery" scheme="https://okcthouder.github.io/categories/javascript/jQuery/"/>
    
    
      <category term="jQuery" scheme="https://okcthouder.github.io/tags/jQuery/"/>
    
      <category term="javascript" scheme="https://okcthouder.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>jQuery读书笔记</title>
    <link href="https://okcthouder.github.io/2017/05/01/jQuery%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <id>https://okcthouder.github.io/2017/05/01/jQuery读书笔记/</id>
    <published>2017-05-01T08:12:20.000Z</published>
    <updated>2017-08-01T08:14:31.012Z</updated>
    
    <content type="html"><![CDATA[<p>最近在学习jQuery,顺便做了一点笔记，防止以后要寻找的时候找不到。</p>
 <a id="more"></a>
<h3 id="1"><a href="#1" class="headerlink" title="1)"></a>1)</h3><p>$(“form :input”) 返回form中的所有表单对象，包括textarea、select、button等</p>
<p>$(“form input”)返回form中的所有input标签对象</p>
<p>$(“#form1:input”)表示id为#form1的input</p>
<p>form input 是属于层级选择器(将每一个选择器匹配到的元素合并后一起返回)</p>
<h3 id="2"><a href="#2" class="headerlink" title="2)"></a>2)</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">1. &lt;div id = "id#b"&gt;bb&lt;/div&gt;  </div><div class="line">2. &lt;div id = "id[1]"&gt;cc&lt;/div&gt;</div></pre></td></tr></table></figure>
<p>上述div不能用普通方式来获取，例如</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> $(<span class="string">"#id#b"</span>);  </div><div class="line"><span class="number">2.</span> $(<span class="string">"#id[1]"</span>);</div></pre></td></tr></table></figure>
<p>而应该用转义字符：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> $(<span class="string">"#id\#b"</span>);  </div><div class="line"><span class="number">2.</span> $(<span class="string">"#id\[1\]"</span>);</div></pre></td></tr></table></figure>
<h3 id="3"><a href="#3" class="headerlink" title="3)"></a>3)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </div><div class="line"><span class="number">2.</span>      <span class="comment">//...  </span></div><div class="line"><span class="number">3.</span> &#125;);  </div><div class="line"><span class="number">4.</span> 可以简写为  </div><div class="line"><span class="number">5.</span> $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </div><div class="line"><span class="number">6.</span>   <span class="comment">//...  </span></div><div class="line"><span class="number">7.</span> &#125;)</div></pre></td></tr></table></figure>
<h3 id="4"><a href="#4" class="headerlink" title="4)"></a>4)</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1. <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>  </div><div class="line">2.    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span>aa<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </div><div class="line">3.    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span>bb<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </div><div class="line">4.    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span>cc<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </div><div class="line">5.    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span>dd<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </div><div class="line">6. <span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </div><div class="line">7. <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span>ee<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </div><div class="line">8. <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span>ff<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>下面用jquery选取：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </div><div class="line"><span class="number">2.</span>   <span class="comment">//注意区分类似这样的选择器  </span></div><div class="line"><span class="number">3.</span>   <span class="comment">//虽然一个空格，却截然不同的效果.  </span></div><div class="line"><span class="number">4.</span>    <span class="keyword">var</span> t_a = (<span class="string">'.test :hidden'</span>);  </div><div class="line"><span class="number">5.</span>    <span class="keyword">var</span> t_b = (<span class="string">'.test:hidden'</span>);  </div><div class="line"><span class="number">6.</span>    <span class="keyword">var</span> len_a = $t_a.length;  </div><div class="line"><span class="number">7.</span>    <span class="keyword">var</span> len_b = $t_b.length;  </div><div class="line"><span class="number">8.</span>    (<span class="string">"&lt;p&gt;('.test :hidden')的长度为"</span>+len_a+<span class="string">"&lt;/p&gt;"</span>).appendTo(<span class="string">"body"</span>);  <span class="comment">//4  </span></div><div class="line"><span class="number">9.</span>    (<span class="string">"&lt;p&gt;('.test:hidden')的长度为"</span>+len_b+<span class="string">"&lt;/p&gt;"</span>).appendTo(<span class="string">"body"</span>);   <span class="comment">//3  </span></div><div class="line"><span class="number">10.</span> &#125;)</div></pre></td></tr></table></figure>
<p>原因是：</p>
<p>var $t_a = $(“.test :hidden”);</p>
<p>以上代码是选取class为”test”的元素里面的隐藏元素</p>
<p>而代码：</p>
<p>var $t_b = $(“.test:hidden”);</p>
<p>这是选取隐藏的class为“test”的元素</p>
<h3 id="5"><a href="#5" class="headerlink" title="5)"></a>5)</h3><p>detach()和remove()一样，也是从DOM中去掉匹配的元素。但是这个方法不会把匹配的元素从jQuery对象中删除，因而可以在将来再使用这些匹配的元素，与remove不同的是，所以绑定的事件、附加的数据等都会保留下来。</p>
<h3 id="6"><a href="#6" class="headerlink" title="6)"></a>6)</h3><p>$(this).clone(true).appendTo(“body”); //注意参数true</p>
<p>在clone()方法中传递了一个参数true，它的含义是复制元素的同事复制元素中所绑定的事件，因而该元素的副本也同样具有复制功能。</p>
<h3 id="7"><a href="#7" class="headerlink" title="7)"></a>7)</h3><p>在css()方法中，如果属性中带有“-”符号，例如font-size属性，如果在设置这些属性的值得时候不带引号，那么就要用驼峰式写法，例如：</p>
<p>$(“p”).css({fontSize : “30px” , backgroundColor : “#888888”});</p>
<p>如果加上了引号，既可以写成”font-size”,也可以写成“fontSize”。</p>
<h3 id="8"><a href="#8" class="headerlink" title="8)"></a>8)</h3><p>show()方法和hide()方法会同时修改元素的多个样式属性，即高度、宽度和不透明度；fadeOut()和fadeIn()方法智慧修改元素的不透明度；slideDown()方法和slideUp()方法智慧改变元素的高度。</p>
<h3 id="9"><a href="#9" class="headerlink" title="9)"></a>9)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> $(<span class="string">"button:eq(1)"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </div><div class="line"><span class="number">2.</span>       $(<span class="string">"#panel"</span>).stop();<span class="comment">//停止当前动画，继续下一个动画  </span></div><div class="line"><span class="number">3.</span>   &#125;);  </div><div class="line"><span class="number">4.</span>   $(<span class="string">"button:eq(2)"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </div><div class="line"><span class="number">5.</span>       $(<span class="string">"#panel"</span>).stop(<span class="literal">true</span>);<span class="comment">//清除元素的所有动画  </span></div><div class="line"><span class="number">6.</span>   &#125;);  </div><div class="line"><span class="number">7.</span>   $(<span class="string">"button:eq(3)"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </div><div class="line"><span class="number">8.</span>       $(<span class="string">"#panel"</span>).stop(<span class="literal">false</span>,<span class="literal">true</span>);<span class="comment">//让当前动画直接到达末状态 ，继续下一个动画  </span></div><div class="line"><span class="number">9.</span>   &#125;);  </div><div class="line"><span class="number">10.</span>   $(<span class="string">"button:eq(4)"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </div><div class="line"><span class="number">11.</span>       $(<span class="string">"#panel"</span>).stop(<span class="literal">true</span>,<span class="literal">true</span>);<span class="comment">//清除元素的所有动画，让当前动画直接到达末状态   </span></div><div class="line"><span class="number">12.</span>   &#125;);</div></pre></td></tr></table></figure>
<h3 id="10"><a href="#10" class="headerlink" title="10)"></a>10)</h3><p>animate回调函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"#panel"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </div><div class="line">$(<span class="keyword">this</span>).animate(&#123;<span class="attr">left</span>: <span class="string">"400px"</span>, <span class="attr">height</span>: <span class="string">"200px"</span>, <span class="attr">opacity</span>: <span class="string">"1"</span>&#125;, <span class="number">3000</span>)  </div><div class="line">                    .animate(&#123;<span class="attr">top</span>: <span class="string">"200px"</span>, <span class="attr">width</span>: <span class="string">"200px"</span>&#125;, <span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </div><div class="line">                        $(<span class="keyword">this</span>).css(<span class="string">"border"</span>, <span class="string">"5px solid blue"</span>);  </div><div class="line">                    &#125;)</div></pre></td></tr></table></figure>
<h3 id="11"><a href="#11" class="headerlink" title="11)"></a>11)</h3><p>用attr()和prop()访问对象的属性的原则：</p>
<p>第一个原则：只添加属性名称该属性就会生效应该使用prop()；</p>
<p>第一个原则：只存在true/false的属性应该使用prop()。</p>
<p>按照官方说明，如果是设置disable和checked这些属性，应使用prop()方法，而不是使用attr()方法。（例如在某些浏览器里，只要写了disabled属性就可以，有些则要写：disabled = “disabled”。）</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近在学习jQuery,顺便做了一点笔记，防止以后要寻找的时候找不到。&lt;/p&gt;
    
    </summary>
    
      <category term="javascript" scheme="https://okcthouder.github.io/categories/javascript/"/>
    
    
      <category term="jQuery" scheme="https://okcthouder.github.io/tags/jQuery/"/>
    
      <category term="javascript" scheme="https://okcthouder.github.io/tags/javascript/"/>
    
      <category term="读书笔记" scheme="https://okcthouder.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>javascript冒泡事件的作用效果</title>
    <link href="https://okcthouder.github.io/2017/04/22/javascript%E5%86%92%E6%B3%A1%E4%BA%8B%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8%E6%95%88%E6%9E%9C/"/>
    <id>https://okcthouder.github.io/2017/04/22/javascript冒泡事件的作用效果/</id>
    <published>2017-04-22T11:14:33.000Z</published>
    <updated>2017-07-30T11:19:01.289Z</updated>
    
    <content type="html"><![CDATA[<p>​    这段时间在学习js，忽然发现了冒泡事件挺有趣的，故研究后来跟各位分享一下效果。</p>
<a id="more"></a>
<hr>
<p>话不多说，直接上代码：</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span>  </div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"body"</span>&gt;</span>    </div><div class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span>    </div><div class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </div><div class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>  </div><div class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>      </div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">  </span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">stopBubble</span>(<span class="params">e</span>)</span>&#123;  </div><div class="line">        <span class="keyword">if</span>(e &amp;&amp; e.stopPropagation)&#123;<span class="comment">//如果不是IE浏览器  </span></div><div class="line">            e.stopPropagation();  </div><div class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//是IE浏览器  </span></div><div class="line">        <span class="built_in">window</span>.event.cancelBubble=<span class="literal">true</span>;  </div><div class="line">    &#125;  </div><div class="line">&#125;  </div><div class="line">   <span class="keyword">var</span> all = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"*"</span>);  </div><div class="line">   <span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">0</span>;i&lt;all.length;i++)&#123;  </div><div class="line">        all[i].onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="comment">//鼠标悬停在元素上  </span></div><div class="line">            <span class="keyword">this</span>.style.border=<span class="string">"1px solid red"</span>;  </div><div class="line">            stopBubble(e);  </div><div class="line">    &#125;;  </div><div class="line">    all[i].onmouseout=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="comment">//鼠标离开  </span></div><div class="line">        <span class="keyword">this</span>.style.border=<span class="string">"0px"</span>;  </div><div class="line">        stopBubble(e);<span class="comment">//阻止冒泡  </span></div><div class="line">    &#125;;  </div><div class="line">&#125;  </div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </div><div class="line">  </div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>​    上面是一个简单的例子,当鼠标悬停在元素之上,我们为这个元素加上红色边框,如果离开了再去掉这个红色边框,</p>
<p>​    如果不加 这个 阻止冒泡的方法,每次都会给父类增加红色边框,大家 可以试验一下.一试便知!</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;​    这段时间在学习js，忽然发现了冒泡事件挺有趣的，故研究后来跟各位分享一下效果。&lt;/p&gt;
    
    </summary>
    
      <category term="javascript" scheme="https://okcthouder.github.io/categories/javascript/"/>
    
    
      <category term="javascript" scheme="https://okcthouder.github.io/tags/javascript/"/>
    
      <category term="冒泡事件" scheme="https://okcthouder.github.io/tags/%E5%86%92%E6%B3%A1%E4%BA%8B%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>Hello Hexo</title>
    <link href="https://okcthouder.github.io/2017/01/23/hello-hexo/"/>
    <id>https://okcthouder.github.io/2017/01/23/hello-hexo/</id>
    <published>2017-01-23T06:44:00.000Z</published>
    <updated>2017-07-28T02:57:29.443Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.  <a id="more"></a></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="http://music.163.com/outchain/player?type=2&id=28947001&auto=1&height=66"></iframe>

<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a>  </p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.
    
    </summary>
    
      <category term="Hexo教程" scheme="https://okcthouder.github.io/categories/Hexo%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="Hexo" scheme="https://okcthouder.github.io/tags/Hexo/"/>
    
      <category term="教程" scheme="https://okcthouder.github.io/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
</feed>
